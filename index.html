<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynkLocal - Guia da Regi√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-main: #F8F9FA;
            --bg-card: #FFFFFF;
            --text-main: #546E7A;
            --primary: #4DB6AC;
            --primary-dark: #26A69A;
            --secondary: #90CAF9;
            --accent: #FFD54F;
            --font-body: 'Nunito', sans-serif;
            --font-display: 'Pacifico', cursive;
        }
        body {
            font-family: var(--font-body);
            background-color: var(--bg-main);
            color: var(--text-main);
        }
        #main-title {
            font-family: var(--font-display);
            color: var(--primary-dark);
        }
        .view { transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out; }
        .hidden-view { display: none; opacity: 0; transform: translateY(10px); }
        #culture-map, #trails-map {
            height: 50vh;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px -5px rgba(77, 182, 172, 0.15), 0 8px 10px -6px rgba(77, 182, 172, 0.15);
        }
        .modal-backdrop { transition: opacity 0.3s ease-in-out; }
        .modal-content { transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .scroll-container { scrollbar-width: none; -ms-overflow-style: none; }
        .scroll-container::-webkit-scrollbar { display: none; }
        .skeleton-card { background-color: #ECEFF1; border-radius: 1rem; animation: pulse 1.8s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .7; }
        }
        .filter-btn.active, .tab-btn.active {
            color: var(--primary-dark);
            border-color: var(--primary-dark);
            font-weight: 700;
        }
        .filter-btn, .tab-btn { transition: all 0.25s ease-out; }
        .tab-content { transition: opacity 0.3s ease-in-out; }
        .tab-content.hidden { display: none; opacity: 0; }
        
        .timeline {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 0;
        }
        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background-color: #B2DFDB;
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
            border-radius: 3px;
        }
        .timeline-container {
            padding: 10px 40px;
            position: relative;
            background-color: inherit;
            width: 50%;
        }
        .timeline-container.left { left: 0; }
        .timeline-container.right { left: 50%; }
        .timeline-container::after {
            content: '';
            position: absolute;
            width: 28px;
            height: 28px;
            right: -14px;
            background-color: white;
            border: 5px solid var(--primary);
            top: 32px;
            border-radius: 50%;
            z-index: 1;
            transition: transform 0.2s ease-out;
        }
        .timeline-container:hover::after {
            transform: scale(1.1);
        }
        .timeline-container.right::after { left: -14px; }
        .timeline-content {
            padding: 20px 30px;
            background-color: white;
            position: relative;
            border-radius: 1rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }
        .timeline-container:hover .timeline-content {
            transform: translateY(-5px);
        }
        .timeline-content .year {
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        .timeline-content .title {
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--text-main);
            margin-bottom: 0.75rem;
        }
        .timeline-content .event-desc {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #546E7A;
        }
        
        /* Mobile Timeline Adjustments */
        @media screen and (max-width: 768px) {
            .timeline::after {
                left: 31px;
            }
            .timeline-container {
                width: 100%;
                padding-left: 70px;
                padding-right: 15px;
            }
            .timeline-container.left, .timeline-container.right {
                left: 0%;
            }
            .timeline-container.left::after, .timeline-container.right::after {
                left: 15px;
            }
        }

        .jornada-valor-card { 
            transition: all 0.3s ease-in-out; 
        }
        .jornada-valor-card:hover { 
            transform: translateY(-5px) scale(1.03); 
            background-color: var(--bg-card); 
            box-shadow: 0 10px 25px -5px rgba(77, 182, 172, 0.2), 0 8px 10px -6px rgba(77, 182, 172, 0.2); 
            border-color: var(--primary);
        }
        .team-mosaic img { 
            transition: transform 0.3s ease, filter 0.3s ease; 
        }
        .team-mosaic a:hover img { 
            transform: scale(1.05); 
            filter: brightness(1.1); 
        }
        .career-card {
            transition: all 0.3s ease-in-out;
        }
        .career-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px -5px rgba(77, 182, 172, 0.25), 0 10px 15px -6px rgba(77, 182, 172, 0.25);
        }
        .leaflet-popup-content-wrapper {
            border-radius: 12px;
        }
        .leaflet-popup-content {
            margin: 14px;
            font-family: var(--font-body);
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="container mx-auto p-4 sm:p-6 max-w-7xl">

        <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-lg shadow-sm -mx-4 sm:-mx-6 mb-8 px-4 sm:px-6 py-3 rounded-b-2xl">
            <div class="container mx-auto flex justify-between items-center">
                <h1 id="main-title" class="text-3xl sm:text-4xl cursor-pointer" onclick="App.navigateTo('city-selection')">SynkLocal</h1>
                <nav class="hidden md:flex items-center space-x-6">
                    <a href="#" id="nav-home" onclick="App.navigateTo('home')" class="text-gray-500 hover:text-[var(--primary-dark)] font-medium transition-colors duration-300 hidden">In√≠cio</a>
                    <a href="#" id="nav-treasure" onclick="App.navigateTo('treasure-hunt')" class="text-gray-500 hover:text-[var(--primary-dark)] font-medium transition-colors duration-300 hidden">Ca√ßa ao Tesouro</a>
                    <a href="#" id="nav-culture" onclick="App.navigateTo('culture')" class="text-gray-500 hover:text-[var(--primary-dark)] font-medium transition-colors duration-300 hidden">Cultura & Turismo</a>
                    <a href="#" id="nav-events" onclick="App.navigateTo('events')" class="text-gray-500 hover:text-[var(--primary-dark)] font-medium transition-colors duration-300 hidden">Eventos</a>
                    <a href="#" id="nav-careers" onclick="App.navigateTo('careers')" class="text-gray-500 hover:text-[var(--primary-dark)] font-medium transition-colors duration-300 hidden">Carreiras</a>
                    <button id="change-city-btn" onclick="App.navigateTo('city-selection')" class="text-gray-500 hover:text-[var(--primary-dark)] font-medium transition-colors duration-300 hidden">Trocar Localidade</button>
                    <a href="https://wa.me/5524936180096" target="_blank" class="bg-gradient-to-r from-[var(--primary)] to-[var(--accent)] text-white px-5 py-2 rounded-full shadow-md hover:shadow-lg transition-all transform hover:scale-105 active:scale-95 font-bold">Anuncie Aqui</a>
                </nav>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-[var(--primary-dark)] focus:outline-none p-2 -mr-2">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>
            </div>
        </header>

        <div id="mobile-menu" class="hidden md:hidden mb-6 bg-white rounded-2xl shadow-lg p-4">
            <a href="#" onclick="App.navigateTo('home'); UI.toggleMobileMenu();" class="block py-3 px-4 hover:bg-teal-50 rounded-lg font-medium">In√≠cio</a>
            <a href="#" onclick="App.navigateTo('treasure-hunt'); UI.toggleMobileMenu();" class="block py-3 px-4 hover:bg-teal-50 rounded-lg font-medium">Ca√ßa ao Tesouro</a>
            <a href="#" onclick="App.navigateTo('culture'); UI.toggleMobileMenu();" class="block py-3 px-4 hover:bg-teal-50 rounded-lg font-medium">Cultura & Turismo</a>
            <a href="#" onclick="App.navigateTo('events'); UI.toggleMobileMenu();" class="block py-3 px-4 hover:bg-teal-50 rounded-lg font-medium">Eventos</a>
            <a href="#" onclick="App.navigateTo('careers'); UI.toggleMobileMenu();" class="block py-3 px-4 hover:bg-teal-50 rounded-lg font-medium">Carreiras</a>
            <a href="#" onclick="App.navigateTo('city-selection'); UI.toggleMobileMenu();" class="block py-3 px-4 hover:bg-teal-50 rounded-lg font-medium">Trocar Localidade</a>
            <a href="https://wa.me/5524936180096" target="_blank" class="block mt-4 w-full text-center bg-gradient-to-r from-[var(--primary)] to-[var(--accent)] text-white px-4 py-3 rounded-lg shadow hover:shadow-md font-bold">Anuncie Aqui</a>
        </div>

        <main>
            <div id="city-selection-view" class="view">
                <section class="text-center mb-10 md:mb-12">
                    <h2 class="text-3xl sm:text-4xl md:text-5xl font-extrabold mb-4 text-[var(--text-main)] tracking-tight">Bem-vindo ao SynkLocal! ‚ú®</h2>
                    <p class="text-base sm:text-lg text-gray-500 max-w-2xl mx-auto">Selecione uma localidade para come√ßar a explorar o que h√° de melhor.</p>
                </section>
                <div id="city-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8"></div>
            </div>

            <div id="home-view" class="hidden-view view"></div>
            
            <div id="treasure-hunt-view" class="hidden-view view">
                <button onclick="App.navigateTo('home')" class="bg-white text-gray-800 px-5 py-2.5 rounded-full mb-6 hover:bg-gray-100 transition-all shadow-md active:scale-95 text-sm font-semibold">‚Üê Voltar para o In√≠cio</button>
                <div id="treasure-hunt-content"></div>
            </div>

            <div id="treasure-details-view" class="hidden-view view"></div>
            
            <div id="culture-view" class="hidden-view view">
                 <button onclick="App.navigateTo('home')" class="bg-white text-gray-800 px-5 py-2.5 rounded-full mb-6 hover:bg-gray-100 transition-all shadow-md active:scale-95 text-sm font-semibold">‚Üê Voltar para o In√≠cio</button>
                <div id="culture-content"></div>
            </div>

            <div id="careers-view" class="hidden-view view">
                <button onclick="App.navigateTo('home')" class="bg-white text-gray-800 px-5 py-2.5 rounded-full mb-6 hover:bg-gray-100 transition-all shadow-md active:scale-95 text-sm font-semibold">‚Üê Voltar para o In√≠cio</button>
                <div id="careers-content"></div>
            </div>
            
            <div id="food-guide-view" class="hidden-view view">
                <button onclick="App.navigateTo('home')" class="bg-white text-gray-800 px-5 py-2.5 rounded-full mb-6 hover:bg-gray-100 transition-all shadow-md active:scale-95 text-sm font-semibold">‚Üê Voltar para o In√≠cio</button>
                <div id="food-guide-content"></div>
            </div>

            <div id="events-view" class="hidden-view view">
                <button onclick="App.navigateTo('home')" class="bg-white text-gray-800 px-5 py-2.5 rounded-full mb-6 hover:bg-gray-100 transition-all shadow-md active:scale-95 text-sm font-semibold">‚Üê Voltar para o In√≠cio</button>
                <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-6">
                    <h2 id="events-title" class="text-2xl sm:text-3xl font-bold tracking-tight mb-4 sm:mb-0">Agenda de Eventos</h2>
                </div>
                <div id="event-filters" class="flex overflow-x-auto scroll-container gap-3 mb-8 pb-2"></div>
                <div id="happening-now-section"></div>
                <div id="upcoming-events-section"></div>
                <p id="no-events" class="hidden text-center text-gray-500 mt-10 py-10">Nenhum evento encontrado com os filtros selecionados.</p>
            </div>

            <div id="results-view" class="hidden-view view">
                <button onclick="App.navigateTo('home')" class="bg-white text-gray-800 px-5 py-2.5 rounded-full mb-6 hover:bg-gray-100 transition-all shadow-md active:scale-95 text-sm font-semibold">‚Üê Voltar para o In√≠cio</button>
                <div class="lg:flex lg:space-x-8">
                    <aside class="lg:w-1/4 mb-8 lg:mb-0">
                        <div class="lg:sticky top-28">
                            <h3 class="text-xl font-bold mb-4 tracking-tight">Filtros</h3>
                            <div class="space-y-6 bg-white p-4 sm:p-6 rounded-3xl shadow-xl shadow-teal-100/50">
                                <div>
                                    <label for="search-input-results" class="font-semibold block mb-2 text-sm">Buscar por termo:</label>
                                    <input id="search-input-results" type="text" placeholder="Buscar..." class="w-full p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[var(--primary)]">
                                </div>
                                <div>
                                    <h4 class="font-semibold mb-2 text-sm">Bairro/Distrito</h4>
                                    <div id="filter-neighborhood" class="space-y-2 max-h-48 overflow-y-auto pr-2"></div>
                                </div>
                                <div>
                                    <h4 class="font-semibold mb-2 text-sm">Status</h4>
                                    <div id="filter-status" class="space-y-2">
                                        <div class="flex items-center"><input type="radio" id="status-all" name="status" value="all" class="h-4 w-4 text-[var(--primary-dark)] border-gray-300 focus:ring-[var(--primary)]" checked><label for="status-all" class="ml-2 text-sm">Todos</label></div>
                                        <div class="flex items-center"><input type="radio" id="status-open" name="status" value="open" class="h-4 w-4 text-[var(--primary-dark)] border-gray-300 focus:ring-[var(--primary)]"><label for="status-open" class="ml-2 text-sm">Aberto Agora</label></div>
                                    </div>
                                </div>
                                <button onclick="App.applyFilters()" class="w-full bg-[var(--primary)] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[var(--primary-dark)] transition-all transform active:scale-95">Aplicar Filtros</button>
                            </div>
                        </div>
                    </aside>
                    <div class="lg:w-3/4">
                        <h2 id="results-title" class="text-2xl sm:text-3xl font-bold mb-6 tracking-tight">Resultados</h2>
                        <div id="results-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 md:gap-8"></div>
                        <p id="no-results" class="hidden text-center text-gray-500 mt-10 py-16 bg-white rounded-3xl shadow-lg shadow-teal-100/50">Nenhuma empresa encontrada com os crit√©rios selecionados.</p>
                    </div>
                </div>
            </div>

            <div id="details-view" class="hidden-view view bg-white rounded-3xl shadow-2xl shadow-teal-200/50 p-4 sm:p-6 md:p-8"></div>
        </main>
        
        <div id="quote-modal" class="fixed inset-0 bg-black bg-opacity-50 z-[100] flex items-center justify-center p-4 hidden opacity-0 modal-backdrop">
            <div id="quote-modal-content" class="bg-white rounded-3xl shadow-2xl p-6 sm:p-8 w-full max-w-md transform scale-95 modal-content max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold tracking-tight">Pedir Or√ßamento ‚úâÔ∏è</h3>
                    <button onclick="UI.closeModal('quote-modal')" class="text-gray-400 hover:text-gray-800 text-3xl transition-colors">√ó</button>
                </div>
                <div id="quote-form-container">
                    <p class="text-gray-600 mb-6">Preencha os dados e sua solicita√ß√£o ser√° enviada para <span id="modal-company-name" class="font-bold"></span>.</p>
                    <form onsubmit="event.preventDefault(); App.sendQuote();">
                        <div class="space-y-4">
                            <input type="text" placeholder="Seu Nome" class="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[var(--primary)]" required>
                            <input type="email" placeholder="Seu E-mail" class="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[var(--primary)]" required>
                            <textarea placeholder="Descreva o que voc√™ precisa..." class="w-full p-3 border border-gray-200 rounded-xl h-24 focus:ring-2 focus:ring-[var(--primary)]" required></textarea>
                            <button type="submit" class="w-full bg-[var(--primary)] text-white px-6 py-3 rounded-xl font-semibold hover:bg-[var(--primary-dark)] transition-all transform active:scale-95">Enviar Solicita√ß√£o</button>
                        </div>
                    </form>
                </div>
                <div id="quote-success-message" class="hidden text-center py-8">
                    <h3 class="text-2xl font-bold text-green-500 mb-4">Enviado com Sucesso! üéâ</h3>
                    <p class="text-gray-600">Sua solicita√ß√£o foi enviada. A empresa entrar√° em contato em breve.</p>
                    <button onclick="UI.closeModal('quote-modal')" class="mt-6 w-full bg-[var(--primary)] text-white px-6 py-3 rounded-xl font-semibold hover:bg-[var(--primary-dark)] transition-colors">Fechar</button>
                </div>
            </div>
        </div>

        <div id="cv-modal" class="fixed inset-0 bg-black bg-opacity-60 z-[100] flex items-center justify-center p-4 hidden opacity-0 modal-backdrop">
            <div id="cv-modal-content" class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 w-full max-w-3xl transform scale-95 modal-content max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-4 border-b pb-3">
                    <h3 class="text-xl sm:text-2xl font-bold tracking-tight">Modelo de Curr√≠culo üìÑ</h3>
                    <button onclick="UI.closeModal('cv-modal')" class="text-gray-400 hover:text-gray-800 text-3xl transition-colors">√ó</button>
                </div>
                <div id="cv-content" class="text-sm text-gray-700 leading-relaxed"></div>
            </div>
        </div>

        <footer class="text-center mt-16 pt-8 border-t border-teal-100">
            <div class="flex justify-center space-x-6 text-gray-500 mb-4">
                <a href="#" class="hover:text-[var(--primary-dark)] transition-colors">Sobre N√≥s</a>
                <a href="https://wa.me/5524936180096" target="_blank" class="hover:text-[var(--primary-dark)] transition-colors">Anuncie</a>
                <a href="#" class="hover:text-[var(--primary-dark)] transition-colors">Contato</a>
            </div>
            <p class="text-gray-400 text-sm">¬© 2025 SynkLocal. Todos os direitos reservados.</p>
        </footer>
    </div>
    
    <button id="scrollToTopBtn" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="fixed bottom-6 right-6 bg-[var(--primary)] text-white p-3 rounded-full shadow-lg hover:bg-[var(--primary-dark)] focus:outline-none opacity-0 transform translate-y-4 hover:scale-110 active:scale-100 transition-all">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
        </svg>
    </button>

<script>
// O SCRIPT JAVASCRIPT PERMANECE O MESMO, AS MUDAN√áAS S√ÉO NO HTML/CSS
const DB = {
    cities: [
        { 
            name: "L√≠dice", 
            image: "imagem/lidice/capaLidice.jpg", 
            lat: -22.79, 
            lon: -44.18,
            culture: {
                shortcutImage: "https://www.rj.gov.br/wp-content/uploads/2022/07/Lidice-Capa-1-1.jpg",
                timeline: [
                    { year: "1942", title: "A Trag√©dia Original", event: "A vila de L√≠dice, na antiga Tchecoslov√°quia, √© brutalmente destru√≠da como retalia√ß√£o nazista. O evento choca a comunidade internacional e inspira atos de solidariedade ao redor do mundo." },
                    { year: "1944", title: "O Renascimento no Brasil", event: "Em um gesto de homenagem e esperan√ßa, o ent√£o distrito de Santo Ant√¥nio do Capivari √© oficialmente rebatizado para L√≠dice. A nova cidade nasce como um farol de paz e mem√≥ria." },
                    { year: "D√©cada de 1950", title: "Constru√ß√£o da Identidade", event: "A cidade come√ßa a se desenvolver, com a constru√ß√£o da Igreja de S√£o Miguel Arcanjo e do centro c√≠vico, projetado para ser o cora√ß√£o da comunidade, fortalecendo sua nova identidade." },
                    { year: "Hoje", title: "Mem√≥ria Viva e Natureza", event: "L√≠dice √© um destino que une hist√≥ria e ecoturismo. O Centro Cultural preserva a mem√≥ria da trag√©dia e do renascimento, enquanto as cachoeiras e a beleza da Mata Atl√¢ntica atraem visitantes em busca de paz e conex√£o." }
                ],
                gastronomia: [
                    { nome: "Galinhada", imagem: "imagem/lidice/gastronomiaLidice/galinhada.webp", desc: "Prato cl√°ssico da ro√ßa, feito com frango caipira e arroz, temperado com a√ßafr√£o e cheiro-verde." },
                    { nome: "Doce de Leite Pastoso", imagem: "imagem/lidice/gastronomiaLidice/docedeleite.jpg", desc: "Uma sobremesa cremosa e irresist√≠vel, feita lentamente no tacho de cobre." }
                ],
                legends: [
                    { title: "O Protetor das Matas", image: "imagem/lidice/natureza/lendadaregiao1.jpg", story: "Dizem os mais antigos que as matas ao redor de L√≠dice s√£o guardadas por um esp√≠rito antigo, uma criatura meio homem, meio bicho, que protege os animais e as nascentes. Ele s√≥ aparece para aqueles que desrespeitam a natureza, com um assobio que gela a espinha. Muitos ca√ßadores j√° voltaram de m√£os vazias, jurando terem sido enganados por trilhas que mudavam de lugar e sons estranhos que os guiavam para longe de suas presas." }
                ],
                gallery: [
                    "https://www.rj.gov.br/wp-content/uploads/2022/07/Lidice-Capa-1-1.jpg", "https://mapadecultura.rj.gov.br/wp-content/uploads/2018/06/IMG_20180610_135003233.jpg", "https://www.diariodovale.com.br/wp-content/uploads/2022/06/Lidice_2.jpg", "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Centro_Cultural_de_L%C3%ADdice.jpg/1200px-Centro_Cultural_de_L%C3%ADdice.jpg", "https://visit.rio.br/wp-content/uploads/2022/11/cachoeira-da-usina-rio-claro-cred-leo-machado-1.jpg", "https://www.turisrio.rj.gov.br/wp-content/uploads/2022/07/Rio-Claro-Cachoeira-do-Tenebroso-Foto-Leo-Machado-1.jpg"
                ],
                tourism: {
                    intro: "L√≠dice √© um convite √† paz e √† aventura. Al√©m de sua hist√≥ria tocante, o distrito √© um ref√∫gio para amantes da natureza, com cachoeiras cristalinas e a exuber√¢ncia da Mata Atl√¢ntica.",
                    spots: [
                        { name: "Cachoeira da Usina", type: "Cachoeira", description: "Uma bela queda d'√°gua com po√ßo para banho, ideal para relaxar e se conectar com a natureza. O acesso √© f√°cil, perfeito para um passeio em fam√≠lia.", gallery: ["imagem/lidice/turismo/cachoeiradausina.jpg", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png"] },
                        { name: "Centro Cultural de L√≠dice", type: "Hist√≥ria", description: "Um espa√ßo dedicado a preservar a mem√≥ria da vila tcheca e a hist√≥ria do renascimento da cidade brasileira. Um local emocionante e educativo.", gallery: ["imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png"] },
                        { name: "Represa do Funil", type: "Lazer", description: "Oferece paisagens deslumbrantes e √© um √≥timo local para pesca e atividades n√°uticas. O p√¥r do sol na represa √© um espet√°culo √† parte.", gallery: ["imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png"] }
                    ]
                }
            }
        },
        { 
            name: "Rio Claro", 
            image: "imagem/rioclaro/capaRioclaro.webp", 
            lat: -22.72, 
            lon: -44.13,
            culture: {
                shortcutImage: "https://visit.rio.br/wp-content/uploads/2022/11/parque-sao-joao-marcos-rio-claro-cred-leo-machado-1.jpg",
                timeline: [
                    { year: "In√≠cio do S√©c. XIX", title: "O Ouro Verde", event: "A regi√£o do Vale do Para√≠ba se torna o epicentro da produ√ß√£o de caf√© no Brasil. Rio Claro e seus arredores veem o surgimento de ricas fazendas e a ascens√£o dos 'Bar√µes do Caf√©'." },
                    { year: "1872", title: "Chegada da Ferrovia", event: "A inaugura√ß√£o da esta√ß√£o de trem em Rio Claro impulsiona ainda mais a economia cafeeira, facilitando o escoamento da produ√ß√£o para os portos e consolidando a riqueza local." },
                    { year: "1940", title: "A 'Atl√¢ntida' Brasileira", event: "Para a expans√£o da capacidade energ√©tica do Rio de Janeiro, a cidade hist√≥rica de S√£o Jo√£o Marcos, um tesouro do per√≠odo colonial, √© desapropriada e inundada, deixando para tr√°s mem√≥rias e ru√≠nas." },
                    { year: "2011", title: "Resgate Hist√≥rico", event: "O Parque Arqueol√≥gico e Ambiental de S√£o Jo√£o Marcos √© inaugurado sobre as ru√≠nas da cidade submersa, transformando a √°rea em um poderoso centro de educa√ß√£o, cultura e turismo." }
                ],
                gastronomia: [
                    { nome: "Feij√£o Tropeiro", imagem: "imagem/rioclaro/gastronomiarioclaro/feijaotropeiro.jpg", desc: "Heran√ßa dos tropeiros, uma mistura robusta de feij√£o, farinha, lingui√ßa, ovos e torresmo." },
                    { nome: "Bolo de Fub√° com Goiabada", imagem: "imagem/rioclaro/gastronomiarioclaro/bolodefuba.jpg", desc: "Um cl√°ssico do caf√© da tarde, fofinho e com o doce sabor da goiabada caseira." }
                ],
                legends: [
                    { title: "A Noiva da Serra", image: "imagem/imagensquebradas/imagemindisponivel.png", story: "Conta a lenda que, em noites de lua cheia, motoristas que passam pela serra de Rio Claro podem avistar a figura et√©rea de uma mulher vestida de noiva na beira da estrada. Dizem ser o esp√≠rito de uma jovem que morreu em um acidente a caminho de seu casamento. Ela apenas busca uma carona para finalmente chegar √† igreja e encontrar a paz." },
                    { title: "O Tesouro de S√£o Jo√£o Marcos", image: "imagem/imagensquebradas/imagemindisponivel.png", story: "Quando a cidade de S√£o Jo√£o Marcos foi inundada, muitos de seus ricos moradores teriam enterrado suas fortunas para n√£o as entregar ao governo. At√© hoje, pescadores e aventureiros contam hist√≥rias de luzes misteriosas e sons de sinos vindos do fundo da represa, acreditando ser o chamado do ouro perdido dos bar√µes do caf√©, que ainda aguarda para ser encontrado." }
                ],
                peopleStories: [
                    { name: "Seu Jaci", photo: "imagem/imagensquebradas/perfilindisponivel.png", story: "Conhecido como o 'guardi√£o das hist√≥rias', Seu Jaci, com seus 87 anos, √© a mem√≥ria viva de Rio Claro. Sentado em sua varanda, ele narra com detalhes a √©poca dos bar√µes do caf√©, a constru√ß√£o da ferrovia e as hist√≥rias da antiga S√£o Jo√£o Marcos antes de ser inundada. Para ele, 'cada pedra e cada √°rvore daqui tem algo a dizer, basta saber escutar'." },
                    { name: "Dona Elza", photo: "imagem/imagensquebradas/perfilindisponivel.png", story: "Dona Elza √© a alma da culin√°ria local. Sua receita de bolo de fub√° com goiabada, passada por tr√™s gera√ß√µes, √© um patrim√¥nio da cidade. Em sua pequena venda, ela n√£o apenas vende doces, mas tamb√©m compartilha afeto e um sorriso caloroso, mantendo viva a tradi√ß√£o do sabor caseiro e do acolhimento do interior." }
                ],
                gallery: [
                    "https://visit.rio.br/wp-content/uploads/2022/11/parque-sao-joao-marcos-rio-claro-cred-leo-machado-1.jpg", "https://mapadecultura.rj.gov.br/wp-content/uploads/2017/10/mapa-cultura-rio-claro-parque-arqueologico-sao-joao-marcos-foto-leo-machado-01.jpg", "https://www.band.uol.com.br/image/2022/07/20/20220719-120516-001-1_800x450.jpg", "https://i.ytimg.com/vi/uQ2Yy-4h2gU/maxresdefault.jpg", "https://www.turisrio.rj.gov.br/wp-content/uploads/2022/07/Rio-Claro-Fazenda-Unia%CC%83o-by-@viajando_sem_parar-1.jpg", "https://vejario.abril.com.br/wp-content/uploads/2021/07/fazenda-Uniao.jpg.jpg"
                ],
                tourism: {
                    intro: "Rio Claro √© uma viagem no tempo. Explore as ru√≠nas de uma cidade submersa, visite fazendas que contam a hist√≥ria do caf√© e mergulhe na rica heran√ßa cultural do Vale do Para√≠ba.",
                    spots: [
                        { name: "Parque Arqueol√≥gico de S√£o Jo√£o Marcos", type: "Parque Hist√≥rico", description: "Conhecida como a 'Atl√¢ntida Brasileira', as ru√≠nas da cidade inundada de S√£o Jo√£o Marcos oferecem uma experi√™ncia √∫nica de imers√£o na hist√≥ria e na natureza.", gallery: ["imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png"] },
                        { name: "Fazenda Uni√£o", type: "Turismo Rural", description: "Uma fazenda hist√≥rica do ciclo do caf√©, perfeitamente preservada. Oferece visitas guiadas, hospedagem e uma aut√™ntica experi√™ncia da vida dos bar√µes do caf√©.", gallery: ["imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png"] },
                        { name: "Cachoeira do Tenebroso", type: "Cachoeira", description: "Uma das mais belas quedas d'√°gua da regi√£o, com um po√ßo profundo e √°guas cristalinas, cercada pela Mata Atl√¢ntica. Ideal para aventureiros.", gallery: ["imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png"] }
                    ]
                }
            }
        },
        { 
            name: "Passa Tr√™s", 
            image: "imagem/passatres/capaPassatres.jpg", 
            lat: -22.85, 
            lon: -44.22,
            culture: {
                timeline: [{ year: "Em breve", title: "Hist√≥ria a ser contada", event: "A hist√≥ria de Passa Tr√™s ser√° detalhada aqui." }],
                tourism: {
                    intro: "Passa Tr√™s √© um convite √† tranquilidade e ao ecoturismo. Com suas cachoeiras escondidas e trilhas, √© o destino perfeito para quem busca aventura e contato direto com a natureza.",
                    spots: [
                        { name: "Cachoeira Tr√™s Quedas", type: "Cachoeira", description: "Uma sequ√™ncia de tr√™s belas quedas d'√°gua que formam piscinas naturais. O local √© perfeito para um dia de lazer e banhos refrescantes.", gallery: ["imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png"] },
                        { name: "Pico do Sinfr√¥nio", type: "Montanhismo", description: "Oferece uma das vistas mais espetaculares da regi√£o. A trilha at√© o cume √© um desafio recompensado por um panorama de 360 graus do vale.", gallery: ["imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png"] }
                    ]
                }
            }
        },
        { 
            name: "Fazenda da Grama", 
            image: "imagem/fazendagrama/capaFazendagrama.jpg", 
            lat: -22.75, 
            lon: -44.05,
            culture: {
                timeline: [{ year: "Em breve", title: "Hist√≥ria a ser contada", event: "A hist√≥ria da Fazenda da Grama ser√° detalhada aqui." }],
                 tourism: {
                    intro: "A regi√£o da Fazenda da Grama √© marcada pelo turismo rural e pela hist√≥ria do caf√©. √â um lugar para desacelerar e apreciar a vida no campo e as belas paisagens.",
                    spots: [
                        { name: "Turismo Rural nas Fazendas", type: "Turismo Rural", description: "Explore as fazendas hist√≥ricas da regi√£o, que oferecem cavalgadas, comidas t√≠picas da ro√ßa e a oportunidade de vivenciar o dia a dia no campo.", gallery: ["imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png"] }
                    ]
                }
            }
        },
        { 
            name: "Getul√¢ndia", 
            image: "imagem/getulandia/capaGetulandia.webp", 
            lat: -22.68, 
            lon: -44.01,
            culture: {
                timeline: [{ year: "Em breve", title: "Hist√≥ria a ser contada", event: "A hist√≥ria de Getul√¢ndia ser√° detalhada aqui." }],
                tourism: {
                    intro: "Getul√¢ndia preserva o charme de uma antiga vila ferrovi√°ria. Seus principais atrativos s√£o a esta√ß√£o de trem e a tranquilidade de uma vida que segue o ritmo da natureza.",
                    spots: [
                        { name: "Antiga Esta√ß√£o Ferrovi√°ria", type: "Hist√≥ria", description: "Um marco da hist√≥ria local, a esta√ß√£o de Getul√¢ndia √© uma bela constru√ß√£o que remete ao tempo √°ureo das ferrovias na regi√£o.", gallery: ["imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png", "imagem/imagensquebradas/imagemindisponivel.png"] }
                    ]
                }
            }
        },
    ],
    categories: [
        { name: "Alimenta√ß√£o", icon: "üçî" }, { name: "Sa√∫de", icon: "ü©∫" },
        { name: "Servi√ßos", icon: "üíº" }, { name: "Para o Lar", icon: "üè†" },
        { name: "Com√©rcio", icon: "üõí" }, { name: "Beleza", icon: "üíÖ" },
        { name: "Educa√ß√£o", icon: "üìö" }, { name: "Automotivo", icon: "üöó" },
        { name: "Pets", icon: "üêæ" }, { name: "Lazer", icon: "üéâ" },
    ],
    companies: [
        {
            id: "EmpresaRC/SulNet RC Internet Provider",
            cidade: "Rio Claro",
            nome: "SulNet RC Internet Provider",
            logotipo: "imagem/rioclaro/empresasRC/capasulnet.png",
            descricao: "Sua melhor conex√£o com o mundo! Oferecemos internet fibra √≥ptica de alta velocidade e estabilidade para resid√™ncias e empresas em Rio Claro e regi√£o.",
            endereco: { rua: "Rua Mozart Cesar Valle, 204", bairro: "Centro", cidade: "Rio Claro", cep: "27460-000", lat: -22.721, lon: -44.138 },
            contato: { whatsapp: "+552435114774", website: "https://sulnettelecom.com.br" },
            horario_funcionamento: { segunda: "08:00-22:00", terca: "08:00-22:00", quarta: "08:00-22:00", quinta: "08:00-22:00", sexta: "08:00-22:00", sabado: "08:00-14:00" },
            categorias: ["Servi√ßos", "Internet", "Tecnologia"],
            palavras_chave: ["internet", "fibra √≥ptica", "provedor", "conex√£o", "velocidade"],
            galeria_fotos: [
                "imagem/rioclaro/empresasRC/capasulnet.png",
                "imagem/rioclaro/empresasRC/galeriasulnet1.png",
                "imagem/rioclaro/empresasRC/galeriasulnet2.jpg",
                "imagem/rioclaro/empresasRC/galeriasulnet3.jpg",
            ],
            avaliacoes: [{ usuario: "Mariana F.", nota: 5, comentario: "A melhor internet da cidade! O suporte t√©cnico √© r√°pido e eficiente." }],
            plano: "destaque",
            data_cadastro: "2025-04-10T09:00:00Z",
            destaques: ["Fibra √ìptica de Ponta a Ponta", "Planos Flex√≠veis", "Suporte T√©cnico Local"],
            verificado: true,
            servicosProdutos: [
                { nome: "Planos Residenciais Fibra", descricao: "Internet de alt√≠ssima velocidade para sua casa, ideal para streaming, jogos online e home office.", preco: "Desde R$ 99/m√™s" },
                { nome: "Solu√ß√µes Empresariais", descricao: "Links dedicados e planos personalizados para empresas que precisam de m√°xima performance e estabilidade.", preco: "Consultar" },
                { nome: "Suporte T√©cnico Especializado", descricao: "Nossa equipe est√° sempre pronta para ajudar, com atendimento r√°pido, local e humanizado.", preco: "Incluso" },
                { nome: "Instala√ß√£o Profissional", descricao: "T√©cnicos qualificados garantem uma instala√ß√£o limpa e eficiente, otimizando o sinal na sua propriedade.", preco: "Consultar" }
            ],
            sobreNos: {
                historia: "Nascida da paix√£o por tecnologia e do desejo de conectar pessoas, a SulNet RC Internet Provider foi fundada em 2008 por Alex, um programador local que sonhava em levar internet de qualidade para todos os cantos de Rio Claro. O que come√ßou com uma pequena antena e muitos sonhos, hoje √© uma robusta rede de fibra √≥ptica que orgulhosamente serve milhares de lares e empresas, impulsionando o desenvolvimento e a comunica√ß√£o na nossa regi√£o.",
                missao: "Nossa miss√£o √© democratizar o acesso √† informa√ß√£o e ao entretenimento, oferecendo uma conex√£o de internet ultrarr√°pida, est√°vel e com um atendimento humano, pr√≥ximo e que entende as necessidades de cada cliente.",
                fundador: {
                    nome: "Alex",
                    foto: "imagem/imagensquebradas/perfilindisponivel.png",
                    citacao: "Acredito que uma conex√£o de qualidade n√£o √© apenas sobre tecnologia, √© sobre criar pontes, encurtar dist√¢ncias e abrir um universo de possibilidades para nossa comunidade."
                },
                valores: [
                    { icone: "fa-solid fa-satellite-dish", titulo: "Inova√ß√£o Constante", descricao: "Buscamos sempre as melhores e mais novas tecnologias para garantir uma conex√£o de ponta." },
                    { icone: "fa-solid fa-users", titulo: "Foco no Cliente", descricao: "Nosso maior ativo √© a satisfa√ß√£o dos nossos clientes. O suporte √© local e humanizado." },
                    { icone: "fa-solid fa-handshake", titulo: "Confian√ßa e Transpar√™ncia", descricao: "Constru√≠mos rela√ß√µes duradouras baseadas na honestidade e em servi√ßos confi√°veis." }
                ],
                teamGallery: [
                    { name: "Daniel", role: "Atendimento T√©cnico", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                    { name: "Gerllan", role: "Atendimento T√©cnico", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                    { name: "Jo√£o Pedro", role: "Atendimento Financeiro", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                    { name: "Maria Eduarda", role: "Atendimento Financeiro", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                    { name: "Mara", role: "Gerente", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                  //{ name: "Alexandre", role: "Engenheiro", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                  //{ name: "Andr√©", role: "T√©cnico", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                  //{ name: "Aldair", role: "T√©cnico", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                  //{ name: "Leonardo", role: "T√©cnico", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                  //{ name: "Daniel Brejo Seco", role: "T√©cnico", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                  //{ name: "Daniel", role: "T√©cnico", img: "imagem/imagensquebradas/perfilindisponivel.png" },
                ]
            },
            promotion: {
                title: "1¬∫ M√™s Gr√°tis!",
                description: "Contrate qualquer plano de fibra √≥ptica e a primeira mensalidade √© por nossa conta. Velocidade e economia para voc√™!",
                tag: "OFERTA DE BOAS-VINDAS"
            }
        },
        {
            id: "empresa-01", cidade: "Rio Claro", nome: "Pizzaria Forno a Lenha",
            logotipo: "https://placehold.co/200x200/4DB6AC/ffffff?text=Pizza",
            descricao: "As mais deliciosas pizzas da cidade, com massa de fermenta√ß√£o natural e ingredientes frescos. Ambiente familiar e aconchegante. Pe√ßa tamb√©m pelo nosso delivery!",
            endereco: { rua: "Rua Principal, 123", bairro: "Centro", cidade: "Rio Claro", cep: "27460-000", lat: -22.723, lon: -44.135 },
            contato: { whatsapp: "+5524912345678", website: "https://example.com" },
            horario_funcionamento: { terca: "18:00-23:00", quarta: "18:00-23:00", quinta: "18:00-23:00", sexta: "18:00-00:00", sabado: "18:00-00:00", domingo: "18:00-23:00" },
            categorias: ["Alimenta√ß√£o", "Pizzarias", "Restaurantes"],
            palavras_chave: ["pizza", "forno a lenha", "delivery", "jantar", "rod√≠zio"],
            galeria_fotos: ["https://images.unsplash.com/photo-1590947132387-155cc02f3212?q=80&w=800&auto=format&fit=crop", "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?q=80&w=800&auto=format&fit=crop", "https://images.unsplash.com/photo-1574071318508-1cdbab80d002?q=80&w=800&auto=format&fit=crop", "https://images.unsplash.com/photo-1534308983496-4fabb1a015ee?q=80&w=800&auto=format&fit=crop"],
            avaliacoes: [ { usuario: "Ana B.", nota: 5, comentario: "A melhor pizza que j√° comi! Massa incr√≠vel."}],
            plano: "destaque", data_cadastro: "2025-01-15T10:00:00Z",
            destaques: ["Massa de Fermenta√ß√£o Natural", "Ingredientes Frescos", "Ambiente Climatizado"],
            verificado: true, videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
            delivery: true, acceptsReservations: true, outdoorSeating: false, // Food Guide Properties
            servicosProdutos: [
                { nome: "Pizzas Salgadas Tradicionais", descricao: "Mais de 40 sabores, desde os cl√°ssicos at√© cria√ß√µes exclusivas da casa, com massa de fermenta√ß√£o natural.", preco: "Desde R$ 45" },
                { nome: "Pizzas Doces", descricao: "Deliciosas op√ß√µes para sobremesa, como a de chocolate com morango e a de banana com canela.", preco: "Desde R$ 38" },
                { nome: "Calzones", descricao: "Pizzas fechadas e generosamente recheadas, assadas com perfei√ß√£o em nosso forno a lenha.", preco: "Desde R$ 52" },
                { nome: "Bebidas e Vinhos", descricao: "Uma sele√ß√£o de vinhos, cervejas artesanais e outras bebidas para harmonizar com sua pizza.", preco: "Consultar" }
            ],
            sobreNos: {
                historia: "Desde 2005, a Pizzaria Forno a Lenha √© um peda√ßo da It√°lia em Rio Claro. Nascida do sonho do Chef Giuseppe, nossa pizzaria traz receitas de fam√≠lia e o aut√™ntico sabor da pizza assada em forno a lenha, criando momentos deliciosos para a nossa comunidade.",
                missao: "Servir pizzas memor√°veis que unem as pessoas, utilizando ingredientes frescos e de alta qualidade, em um ambiente acolhedor e familiar.",
                fundador: {
                    nome: "Chef Giuseppe",
                    foto: "https://randomuser.me/api/portraits/men/46.jpg",
                    citacao: "Cada pizza que sai do nosso forno leva um pouco da minha paix√£o e da hist√≥ria da minha fam√≠lia. Buon appetito!"
                },
                valores: [
                    { icone: "fa-solid fa-fire-burner", titulo: "Tradi√ß√£o", descricao: "Respeitamos as receitas cl√°ssicas e o m√©todo artesanal do forno a lenha." },
                    { icone: "fa-solid fa-seedling", titulo: "Qualidade", descricao: "Selecionamos apenas os melhores e mais frescos ingredientes para nossas pizzas." },
                    { icone: "fa-solid fa-heart", titulo: "Hospitalidade", descricao: "Recebemos cada cliente como parte da nossa grande fam√≠lia italiana." }
                ],
                teamGallery: [
                    { name: "Maria", role: "Pizzaiola", img: "https://randomuser.me/api/portraits/women/62.jpg" },
                    { name: "Jo√£o", role: "Gar√ßom", img: "https://randomuser.me/api/portraits/men/62.jpg" },
                    { name: "Sofia", role: "Atendimento", img: "https://randomuser.me/api/portraits/women/63.jpg" },
                    { name: "Lucas", role: "Cozinha", img: "https://randomuser.me/api/portraits/men/63.jpg" }
                ]
            },
            promotion: {
                title: "Pizza em Dobro",
                description: "Na compra de qualquer pizza grande do nosso card√°pio, voc√™ ganha uma pizza m√©dia de calabresa. V√°lido de ter√ßa a quinta.",
                tag: "LEVE 2 PAGUE 1"
            }
        },
        {
            id: "Salgaderia MB", cidade: "L√≠dice", nome: "Salgaderia MB",
            logotipo: "https://placehold.co/200x200/FFCA28/ffffff?text=MB",
            descricao: "A Salgaderia MB oferece uma variedade deliciosa de salgados frescos e saborosos, perfeitos para qualquer ocasi√£o. De coxinhas crocantes a risoles cremosos, cada item √© feito com carinho e ingredientes de qualidade, garantindo um toque caseiro que agrada a todos os paladares. Ideal para festas, lanches ou aquele desejo repentino!",
            endereco: { rua: "Pra√ßa Padre Ezequiel N¬∞38", bairro: "Centro", cidade: "L√≠dice", cep: "27475000", lat: -22.791, lon: -44.182 },
            contato: { whatsapp: "+5524987654321", website: "https://www.instagram.com/salgaderia.mb/" },
            horario_funcionamento: { segunda: "09:00-20:00", terca: "09:00-20:00", quarta: "09:00-20:00", quinta: "09:00-20:00", sexta: "09:00-20:00", sabado: "09:00-20:00" },
            categorias: ["Alimenta√ß√£o", "Lanches", "Salgados"],
            palavras_chave: ["salgados", "coxinha", "festa", "lanche", "encomenda"],
            galeria_fotos: ["https://images.unsplash.com/photo-1598930338318-4c133c35efe2?q=80&w=800", "https://images.unsplash.com/photo-1604482039902-3e7423750841?q=80&w=800", "https://images.unsplash.com/photo-1599406518353-a5d6251a3a3e?q=80&w=800"],
            avaliacoes: [{ usuario: "Ricardo M.", nota: 5, comentario: "Salgados deliciosos e sempre frescos. Recomendo!" }, { usuario: "Fernanda L.", nota: 5, comentario: "A melhor coxinha da regi√£o, sem d√∫vidas!" }],
            plano: "normal", data_cadastro: "2025-03-20T14:00:00Z",
            destaques: ["Variedade Irresist√≠vel", "Qualidade Garantida", "Ingredientes Fresquinhos"],
            verificado: true, videoUrl: "https://placehold.co/1600x900/cccccc/ffffff?text=Video+Indispon√≠vel",
            delivery: true, acceptsReservations: false, outdoorSeating: true, // Food Guide Properties
            servicosProdutos: [
                { nome: "Salgados Fritos na Hora", descricao: "Coxinha, risole, quibe, bolinha de queijo e mais, fritos no momento do seu pedido para garantir a croc√¢ncia.", preco: "Desde R$ 7" },
                { nome: "Salgados Assados", descricao: "Op√ß√µes mais leves e igualmente deliciosas como esfiha, joelho e empadas variadas.", preco: "Desde R$ 8" },
                { nome: "Encomendas para Festas", descricao: "Planeje seu evento conosco! Oferecemos centos de salgados para anivers√°rios, reuni√µes e confraterniza√ß√µes.", preco: "Consultar" },
                { nome: "Bebidas", descricao: "Refrigerantes, sucos e √°gua para acompanhar seu lanche.", preco: "Desde R$ 5" }
            ],
            sobreNos: {
                historia: "A Salgaderia MB nasceu na cozinha de Dona Benta, uma cozinheira de m√£o cheia que transformou seu amor por salgados em um neg√≥cio de fam√≠lia. Hoje, seus filhos mant√™m a tradi√ß√£o, oferecendo o sabor caseiro que conquistou L√≠dice.",
                missao: "Levar alegria e sabor para a mesa dos nossos clientes com salgados feitos com amor, ingredientes de qualidade e um toque de tradi√ß√£o familiar.",
                fundador: {
                    nome: "Dona Benta",
                    foto: "https://randomuser.me/api/portraits/women/47.jpg",
                    citacao: "O segredo do bom salgado est√° no carinho que a gente coloca em cada um."
                },
                valores: [
                    { icone: "fa-solid fa-kitchen-set", titulo: "Sabor Caseiro", descricao: "Mantemos as receitas originais que s√£o o nosso segredo do sucesso." },
                    { icone: "fa-solid fa-star", titulo: "Qualidade", descricao: "Usamos apenas ingredientes frescos e selecionados em nossos produtos." },
                    { icone: "fa-solid fa-face-smile", titulo: "Atendimento", descricao: "Cada cliente √© recebido com um sorriso e tratado como parte da fam√≠lia." }
                ],
                teamGallery: [
                    { name: "Roberto", role: "Cozinheiro", img: "https://randomuser.me/api/portraits/men/64.jpg" },
                    { name: "L√∫cia", role: "Atendente", img: "https://randomuser.me/api/portraits/women/64.jpg" },
                    { name: "Carlos", role: "Entregador", img: "https://randomuser.me/api/portraits/men/65.jpg" },
                    { name: "Beatriz", role: "Cozinheira", img: "https://randomuser.me/api/portraits/women/65.jpg" }
                ]
            }
        },
        {
            id: "empresa-03", cidade: "Passa Tr√™s", nome: "Bar do Zeca",
            logotipo: "https://placehold.co/200x200/FFD54F/333333?text=Bar",
            descricao: "O melhor da boemia local. Cerveja gelada, petiscos cl√°ssicos e m√∫sica ao vivo toda sexta-feira. Venha conferir!",
            endereco: { rua: "Rua da Matriz, 55", bairro: "Centro", cidade: "Passa Tr√™s", cep: "27470-000", lat: -22.855, lon: -44.225 },
            contato: { whatsapp: "+5524988887777" },
            horario_funcionamento: { terca: "17:00-01:00", quarta: "17:00-01:00", quinta: "17:00-02:00", sexta: "16:00-03:00", sabado: "14:00-03:00" },
            categorias: ["Alimenta√ß√£o", "Lazer", "Bares"],
            palavras_chave: ["bar", "cerveja", "m√∫sica ao vivo", "petisco", "happy hour"],
            galeria_fotos: ["https://images.unsplash.com/photo-1514933651103-005eec06c04b?q=80&w=800&auto=format&fit=crop", "https://images.unsplash.com/photo-1543007631-283050bb3e8c?q=80&w=800&auto=format&fit=crop"],
            avaliacoes: [{ usuario: "Bruno C.", nota: 5, comentario: "Lugar incr√≠vel! M√∫sica de sexta √© imperd√≠vel." }, { usuario: "Juliana A.", nota: 4, comentario: "Gostei do ambiente, mas poderia ter mais op√ß√µes vegetarianas." }],
            plano: "destaque", data_cadastro: "2025-02-18T11:00:00Z",
            destaques: ["M√∫sica ao Vivo", "Cerveja Gelada", "Petiscos Tradicionais"],
            verificado: true,
            delivery: false, acceptsReservations: false, outdoorSeating: true, // Food Guide Properties
            servicosProdutos: [
                { nome: "Cervejas Especiais e Tradicionais", descricao: "Uma vasta sele√ß√£o de cervejas, desde as mais geladas e populares at√© r√≥tulos artesanais da regi√£o.", preco: "Desde R$ 10" },
                { nome: "Petiscos de Boteco", descricao: "Por√ß√µes generosas de torresmo, mandioca frita, lingui√ßa acebolada e outros cl√°ssicos para acompanhar sua bebida.", preco: "Desde R$ 25" },
                { nome: "M√∫sica ao Vivo", descricao: "Toda sexta-feira, o melhor da m√∫sica regional para animar sua noite. Consulte a programa√ß√£o!", preco: "Couvert R$ 10" },
                { nome: "Doses e Caipirinhas", descricao: "Cacha√ßas selecionadas e caipirinhas preparadas na hora com frutas frescas da esta√ß√£o.", preco: "Desde R$ 15" }
            ],
            sobreNos: {
                historia: "O Bar do Zeca √© o ponto de encontro de Passa Tr√™s desde 1998. O que come√ßou como um pequeno balc√£o, hoje √© o palco de grandes amizades, boa m√∫sica e, claro, a cerveja mais gelada da regi√£o. Zeca faz quest√£o de conhecer cada cliente pelo nome.",
                missao: "Ser o melhor lugar para relaxar, encontrar amigos e celebrar a vida, com boa m√∫sica, comida de boteco de qualidade e um ambiente que √© a cara da nossa gente.",
                fundador: {
                    nome: "Zeca",
                    foto: "https://randomuser.me/api/portraits/men/48.jpg",
                    citacao: "Meu bar √© a extens√£o da minha casa. E aqui, todo mundo √© bem-vindo."
                },
                valores: [
                    { icone: "fa-solid fa-guitar", titulo: "M√∫sica Boa", descricao: "A trilha sonora perfeita para criar mem√≥rias inesquec√≠veis." },
                    { icone: "fa-solid fa-beer-mug-empty", titulo: "Cerveja Gelada", descricao: "Nossa prioridade n√∫mero um, sempre no ponto certo para celebrar." },
                    { icone: "fa-solid fa-comments", titulo: "Amizade", descricao: "Mais que um bar, um lugar para fazer e encontrar amigos." }
                ],
                teamGallery: [
                    { name: "Rita", role: "Gar√ßonete", img: "https://randomuser.me/api/portraits/women/66.jpg" },
                    { name: "Jorge", role: "Cozinheiro", img: "https://randomuser.me/api/portraits/men/66.jpg" },
                    { name: "Beto", role: "Gar√ßom", img: "https://randomuser.me/api/portraits/men/67.jpg" },
                    { name: "Clara", role: "Caixa", img: "https://randomuser.me/api/portraits/women/67.jpg" }
                ]
            },
            promotion: {
                title: "Caipirinha em Dobro",
                description: "Sextou com S de SynkLocal! Pe√ßa uma caipirinha e a segunda √© por nossa conta. V√°lido toda sexta, das 18h √†s 21h.",
                tag: "HAPPY HOUR"
            }
        },
        {
            id: "empresa-04", cidade: "Getul√¢ndia", nome: "Academia Vida Ativa",
            logotipo: "https://placehold.co/200x200/81C784/ffffff?text=Gym",
            descricao: "Estrutura completa para muscula√ß√£o, aulas de dan√ßa e funcional. Venha transformar seu corpo e sua sa√∫de.",
            endereco: { rua: "Rua do Com√©rcio, 100", bairro: "Centro", cidade: "Getul√¢ndia", cep: "27450-000", lat: -22.683, lon: -44.012 },
            contato: { whatsapp: "+5524955443322" },
            horario_funcionamento: { segunda: "06:00-22:00", terca: "06:00-22:00", quarta: "06:00-22:00", quinta: "06:00-22:00", sexta: "06:00-22:00", sabado: "08:00-14:00" },
            categorias: ["Sa√∫de", "Academias"],
            palavras_chave: ["muscula√ß√£o", "fitness", "gin√°stica", "sa√∫de"],
            galeria_fotos: ["https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=800&auto=format&fit=crop", "https://images.unsplash.com/photo-1584735935682-2f2b69dff9d2?q=80&w=800&auto=format&fit=crop"],
            avaliacoes: [{ usuario: "Juliana R.", nota: 4, comentario: "√ìtimos equipamentos e bons professores." }, { nota: 5, usuario: "Marcos V.", comentario: "A melhor academia que j√° treinei. Completa e com pre√ßo justo." }],
            plano: "normal", data_cadastro: "2025-05-01T08:00:00Z",
            destaques: ["Equipamentos Modernos", "Grade de Aulas Completa", "Planos Flex√≠veis"],
            verificado: false,
            servicosProdutos: [
                { nome: "Muscula√ß√£o com Equipamentos Modernos", descricao: "√Årea de muscula√ß√£o completa com aparelhos de √∫ltima gera√ß√£o para todos os grupos musculares.", preco: "Incluso no Plano" },
                { nome: "Aulas Coletivas (Dan√ßa e Funcional)", descricao: "Grade de aulas variada com Zumba, FitDance e Treinamento Funcional para queimar calorias de forma divertida.", preco: "Incluso no Plano" },
                { nome: "Avalia√ß√£o F√≠sica e Acompanhamento", descricao: "Nossos instrutores realizam avalia√ß√µes peri√≥dicas para acompanhar sua evolu√ß√£o e ajustar seu treino.", preco: "Consultar" },
                { nome: "Planos Flex√≠veis", descricao: "Oferecemos planos mensais, trimestrais e anuais que se encaixam na sua rotina e no seu bolso.", preco: "Desde R$ 89" }
            ],
            sobreNos: {
                historia: "A Academia Vida Ativa foi criada para ser um espa√ßo de transforma√ß√£o em Getul√¢ndia. Com equipamentos modernos e uma equipe apaixonada, ajudamos nossos alunos a alcan√ßarem seus objetivos de sa√∫de e bem-estar desde 2015.",
                missao: "Inspirar um estilo de vida mais ativo e saud√°vel, oferecendo um ambiente motivador, treinos personalizados e o melhor suporte profissional.",
                fundador: {
                    nome: "Marcos V.",
                    foto: "https://randomuser.me/api/portraits/men/49.jpg",
                    citacao: "Acredito que o movimento √© a chave para uma vida longa e feliz. Aqui, n√≥s movemos pessoas."
                },
                valores: [
                    { icone: "fa-solid fa-dumbbell", titulo: "Resultados", descricao: "Focamos em treinos eficientes para que voc√™ alcance seus objetivos." },
                    { icone: "fa-solid fa-heart-pulse", titulo: "Sa√∫de", descricao: "Promovemos o bem-estar completo, do corpo e da mente." },
                    { icone: "fa-solid fa-people-group", titulo: "Comunidade", descricao: "Criamos um ambiente de apoio e motiva√ß√£o entre alunos e professores." }
                ],
                teamGallery: [
                    { name: "Juliana", role: "Instrutora", img: "https://randomuser.me/api/portraits/women/68.jpg" },
                    { name: "F√°bio", role: "Instrutor", img: "https://randomuser.me/api/portraits/men/68.jpg" },
                    { name: "Sandra", role: "Recep√ß√£o", img: "https://randomuser.me/api/portraits/women/69.jpg" },
                    { name: "Paulo", role: "Instrutor", img: "https://randomuser.me/api/portraits/men/69.jpg" }
                ]
            }
        },
    ],
    events: [
        { id: "evento-01", cidade: "Rio Claro", nome: "Festa de S√£o Jo√£o na Pra√ßa", descricao: "A tradicional festa junina da par√≥quia de Rio Claro est√° de volta! Venha se deliciar com barracas de comidas t√≠picas, como canjica, pamonha, e quent√£o. Haver√° apresenta√ß√£o de quadrilha profissional, um grande leil√£o de prendas e o famoso bing√£o com pr√™mios incr√≠veis. Traga sua fam√≠lia para uma noite de muita alegria e tradi√ß√£o.", data_inicio: "2025-07-24T18:00:00-03:00", data_fim: "2025-07-24T23:59:00-03:00", local: "Pra√ßa da Matriz", imagem: "https://images.unsplash.com/photo-1562217317-a044737c76e2?q=80&w=800&auto=format&fit=crop", categoria: "Festa", popular: true, organizador: "Par√≥quia de Rio Claro", preco: "Gratuito", publico_alvo: "Fam√≠lias", tags: ["Comida T√≠pica", "Quadrilha", "M√∫sica ao Vivo"] },
        { id: "evento-02", cidade: "L√≠dice", nome: "Feira de Artesanato Local", descricao: "Explore a riqueza cultural da nossa regi√£o na Feira de Artesanato de L√≠dice. Descubra o talento dos artes√£os locais, com pe√ßas √∫nicas de decora√ß√£o, vestu√°rio, e uma deliciosa gastronomia artesanal. √â a oportunidade perfeita para encontrar presentes originais e apoiar os produtores da nossa comunidade.", data_inicio: "2025-07-25T09:00:00-03:00", data_fim: "2025-07-25T18:00:00-03:00", local: "Pra√ßa Central", imagem: "https://images.unsplash.com/photo-1528824632644-abc355a6905c?q=80&w=800&auto=format&fit=crop", categoria: "Feira", organizador: "Associa√ß√£o de Artes√£os", preco: "Entrada Franca", publico_alvo: "Todos os p√∫blicos", tags: ["Artesanato", "Cultura", "Lazer"] },
        { id: "evento-03", cidade: "Passa Tr√™s", nome: "Sexta do Rock Ac√∫stico", descricao: "Prepare-se para uma noite inesquec√≠vel no Bar do Zeca! A 'Sexta do Rock Ac√∫stico' traz o melhor do rock nacional e internacional na voz e viol√£o do talentoso artista local, Z√© Ramalho Cover. Ambiente intimista, cerveja gelada e petiscos deliciosos. Couvert art√≠stico opcional.", data_inicio: "2025-07-25T20:00:00-03:00", data_fim: "2025-07-25T23:00:00-03:00", local: "Bar do Zeca", imagem: "https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?q=80&w=800&auto=format&fit=crop", categoria: "M√∫sica", organizador: "Bar do Zeca", preco: "R$ 10 (Couvert)", publico_alvo: "Jovens e Adultos", tags: ["M√∫sica ao Vivo", "Rock", "Happy Hour"] },
        { id: "evento-04", cidade: "Rio Claro", nome: "Cinema na Pra√ßa: Cl√°ssicos dos Anos 80", descricao: "Uma noite de nostalgia sob as estrelas! A Prefeitura de Rio Claro apresenta 'Cinema na Pra√ßa' com a exibi√ß√£o do cl√°ssico dos anos 80, 'De Volta para o Futuro'. Traga sua cadeira de praia, um cobertor quentinho e a pipoca para curtir este filme ic√¥nico em um tel√£o ao ar livre. Evento gratuito e para toda a fam√≠lia.", data_inicio: "2025-08-01T19:30:00-03:00", data_fim: "2025-08-01T21:30:00-03:00", local: "Anfiteatro do Parque", imagem: "https://images.unsplash.com/photo-1533928298208-27ff66855f30?q=80&w=800&auto=format&fit=crop", categoria: "Lazer", organizador: "Prefeitura de Rio Claro", preco: "Gratuito", publico_alvo: "Fam√≠lias", tags: ["Cinema", "Ao ar livre", "Nostalgia"] },
        { id: "evento-05", cidade: "Rio Claro", nome: "1¬∫ Festival de Food Truck", descricao: "O 1¬∫ Festival de Food Truck de Rio Claro chegou! Os melhores sabores sobre rodas estar√£o reunidos no Parque da Cidade, oferecendo uma variedade incr√≠vel de hamb√∫rgueres artesanais, crepes, churros gourmet e muito mais. Al√©m da gastronomia, o evento contar√° com shows de bandas locais todos os dias. Entrada franca!", data_inicio: "2025-08-08T17:00:00-03:00", data_fim: "2025-08-10T23:00:00-03:00", local: "Parque da Cidade", imagem: "https://images.unsplash.com/photo-1576020573839-2a9551a3a339?q=80&w=800&auto=format&fit=crop", categoria: "Festa", popular: true, organizador: "Food Truck Fest Eventos", preco: "Entrada Franca", publico_alvo: "Todos os p√∫blicos", tags: ["Gastronomia", "M√∫sica ao Vivo", "Lazer"] }
    ],
    treasureHunts: [
        {
            id: 'hunt-01',
            cidade: 'Rio Claro',
            companyId: 'empresa-01',
            title: 'O Segredo do Forno a Lenha',
            clue: 'Onde o cheiro de manjeric√£o fresco se mistura com a lenha a queimar, encontre o nosso ingrediente secreto.',
            question: 'Qual √© o lema italiano escrito na parede acima do forno?',
            answer: 'La vita √® una combinazione di magia e pasta',
            reward: '15% de desconto na sua pr√≥xima pizza grande!',
            points: 50
        },
        {
            id: 'hunt-02',
            cidade: 'L√≠dice',
            companyId: 'Salgaderia MB',
            title: 'O Tesouro Crocante',
            clue: 'No cora√ß√£o da pra√ßa, procure o lugar que transforma a felicidade em salgados dourados.',
            question: 'Quantos tipos diferentes de coxinha est√£o no nosso menu hoje?',
            answer: '4',
            reward: 'Compre 5 salgados e leve 6!',
            points: 50
        }
    ],
    jobs: [],
    careerGuide: {
        highSchool: {
            intro: "O ensino m√©dio √© a fase perfeita para explorar, descobrir paix√µes e come√ßar a desenhar o mapa do seu futuro. N√£o tenha pressa para decidir, mas aproveite para experimentar!",
            interests: [
                { icon: "üíª", title: "Tecnologia", description: "Gosta de games, apps e computadores? Carreiras em programa√ß√£o, design digital e an√°lise de dados est√£o em alta." },
                { icon: "‚ù§Ô∏è‚Äçü©π", title: "Sa√∫de & Cuidado", description: "Se voc√™ se importa com o bem-estar dos outros, √°reas como enfermagem, fisioterapia e psicologia podem ser o seu caminho." },
                { icon: "üé®", title: "Artes & Criatividade", description: "Para quem ama se expressar, o mundo do design, m√∫sica, moda e artes visuais √© cheio de oportunidades." },
                { icon: "‚öñÔ∏è", title: "Humanas & Sociais", description: "Curte hist√≥ria, debates e entender a sociedade? Direito, jornalismo e servi√ßo social s√£o √°reas fascinantes." },
            ],
            firstSteps: [
                { icon: "üéì", title: "Cursos Livres e Oficinas", description: "Participe de cursos online ou presenciais sobre temas que te interessam. √â uma √≥tima forma de testar uma √°rea sem compromisso." },
                { icon: "üôå", title: "Voluntariado", description: "Ajudar em uma causa social desenvolve habilidades importantes e te d√° uma nova perspectiva sobre o mundo e suas necessidades." },
                { icon: "üí¨", title: "Converse com Profissionais", description: "Chame para um caf√© (ou uma call) pessoas que trabalham em √°reas que voc√™ admira. Pergunte sobre o dia a dia e os desafios da profiss√£o." },
            ]
        },
        postHighSchool: {
            intro: "O 'terceir√£o' acabou, e agora? Calma, existem muitos caminhos poss√≠veis e nenhum deles √© uma senten√ßa definitiva. O importante √© dar o pr√≥ximo passo com confian√ßa.",
            paths: [
                { icon: "üìö", title: "Vestibular e ENEM", description: "A porta de entrada para a universidade. Exige dedica√ß√£o e estudo, mas abre um leque de carreiras de n√≠vel superior.", pros: "Forma√ß√£o aprofundada, networking, acesso a profiss√µes regulamentadas.", cons: "Alta concorr√™ncia, pode ser um processo longo e estressante." },
                { icon: "üõ†Ô∏è", title: "Cursos T√©cnicos", description: "Forma√ß√£o r√°pida e focada nas necessidades do mercado de trabalho. Ideal para quem quer entrar logo na √°rea.", pros: "R√°pida inser√ß√£o no mercado, custo mais baixo, aprendizado pr√°tico.", cons: "Foco muito espec√≠fico, pode limitar a mudan√ßa de carreira futura." },
                { icon: "üíº", title: "Primeiro Emprego", description: "Entrar no mercado de trabalho para ganhar experi√™ncia, independ√™ncia financeira e entender como as coisas funcionam na pr√°tica.", pros: "Experi√™ncia pr√°tica, desenvolvimento de soft skills, independ√™ncia.", cons: "Pode ser dif√≠cil conciliar com estudos, sal√°rios iniciais mais baixos." },
                { icon: "üí°", title: "Empreendedorismo", description: "Transformar uma ideia em um neg√≥cio. Come√ßar pequeno, testar o mercado e aprender a ser seu pr√≥prio chefe.", pros: "Autonomia, potencial de ganhos, realiza√ß√£o pessoal.", cons: "Alto risco, exige m√∫ltiplas habilidades, jornada solit√°ria no in√≠cio." },
            ],
            tools: [
                { id: "cv", icon: "üìÑ", title: "Modelo de Curr√≠culo", description: "Veja um modelo de curr√≠culo para quem busca o primeiro emprego e adapte com suas informa√ß√µes." },
                { id: "interview", icon: "üé§", title: "Prepara√ß√£o para Entrevistas", description: "Dicas de como se portar, o que responder e como se destacar em uma entrevista de emprego." },
                { id: "courses", icon: "üåê", title: "Cursos Online Gratuitos", description: "Plataformas como Coursera, edX e a Funda√ß√£o Bradesco oferecem cursos para turbinar seu conhecimento." },
            ]
        },
        entrepreneurship: {
            intro: "Sonha em ser seu pr√≥prio chefe? Empreender √© transformar uma paix√£o em um neg√≥cio que gera valor para a comunidade. Nossa regi√£o √© um terreno f√©rtil para novas ideias, conectando o turismo, a gastronomia e os servi√ßos locais. Aqui voc√™ encontrar√° um guia pr√°tico para dar vida ao seu projeto.",
            firstSteps: [
                { icon: "üí°", title: "Valide Sua Ideia", description: "Antes de tudo, converse com potenciais clientes. Sua ideia resolve um problema real? As pessoas pagariam por isso? Um bom term√¥metro √© criar um grupo de WhatsApp e ver o interesse." },
                { icon: "üìù", title: "Plano de Neg√≥cios Simples", description: "Esque√ßa documentos complexos. Responda: O que eu vendo? Para quem? Onde? Como vou divulgar? Quanto preciso para come√ßar e qual ser√° meu pre√ßo?" },
                { icon: "üí∞", title: "Comece Pequeno (MEI)", description: "Formalizar-se como Microempreendedor Individual (MEI) √© o caminho mais f√°cil e barato para ter um CNPJ, emitir notas fiscais e acessar benef√≠cios. O processo √© 100% online." },
                { icon: "üöÄ", title: "Divulgue Seu Neg√≥cio", description: "Use o poder das redes sociais (Instagram √© essencial!), crie um Perfil de Empresa no Google Maps (√© gr√°tis!) e participe de feiras e eventos locais para se tornar conhecido." }
            ],
            businessIdeas: [
                { icon: "üèûÔ∏è", title: "Turismo de Experi√™ncia", description: "Crie roteiros guiados para as cachoeiras, trilhas hist√≥ricas ou fazendas de caf√©. Ofere√ßa um servi√ßo que v√° al√©m do passeio, contando as lendas e a hist√≥ria local." },
                { icon: "üõçÔ∏è", title: "E-commerce Local", description: "Venda produtos da regi√£o (doces, artesanato, queijos) online. Comece com um perfil no Instagram/WhatsApp e expanda para um site simples." },
                { icon: "üõ†Ô∏è", title: "Servi√ßos para o Lar", description: "Com muitas pessoas trabalhando de casa, servi√ßos de qualidade como limpeza, pequenos reparos, jardinagem e montagem de m√≥veis s√£o muito procurados." },
                { icon: "üì±", title: "Marketing Digital para Pequenos Neg√≥cios", description: "Muitos comerciantes locais n√£o sabem como usar a internet para vender mais. Ofere√ßa servi√ßos de gest√£o de redes sociais, cria√ß√£o de an√∫ncios e fotografia de produtos." }
            ],
            commonChallenges: [
                { title: "Conseguir os Primeiros Clientes", tip: "Comece com amigos e familiares, pe√ßa indica√ß√µes e ofere√ßa uma promo√ß√£o de lan√ßamento. Um bom trabalho inicial gera propaganda boca a boca, a mais poderosa de todas." },
                { title: "Medo de Fracassar", tip: "Encare cada passo como um aprendizado. Comece pequeno para que os riscos sejam controlados. Lembre-se: feito √© melhor que perfeito. O importante √© come√ßar." },
                { title: "Misturar Finan√ßas", tip: "Desde o primeiro dia, tenha uma conta banc√°ria separada para o neg√≥cio, mesmo que seja uma conta digital gratuita. Anote todas as entradas e sa√≠das em uma planilha simples." }
            ],
            localStories: [
                { name: "Dona Elza", business: "Doceria Sabores da Ro√ßa", photo: "https://images.unsplash.com/photo-1611601339845-8c736398971f?q=80&w=800", story: "Dona Elza come√ßou vendendo seus famosos bolos de fub√° para vizinhos. Com o sucesso, abriu uma pequena loja em Rio Claro que hoje √© ponto de parada obrigat√≥rio para moradores e turistas, mostrando que a tradi√ß√£o pode virar um grande neg√≥cio." },
                { name: "Jo√£o da Silva", business: "Sulnet Telecom", photo: "https://randomuser.me/api/portraits/men/45.jpg", story: "Percebendo a car√™ncia de internet de qualidade na regi√£o, Jo√£o, um engenheiro de telecomunica√ß√µes, iniciou a Sulnet com uma √∫nica antena. Hoje, sua empresa conecta milhares de pessoas, provando que uma necessidade local pode se transformar em uma oportunidade de empreendimento de sucesso." }
            ],
            resources: [
                { name: "Sebrae", link: "https://sebrae.com.br/", description: "A principal refer√™ncia para pequenos neg√≥cios no Brasil. Oferece cursos, consultorias e materiais gratuitos." },
                { name: "Portal do Empreendedor", link: "https://www.gov.br/empresas-e-negocios/pt-br/empreendedor", description: "O site oficial do governo para abrir, gerenciar e dar baixa no seu MEI." },
                { name: "SynkLocal Anuncie", link: "https://wa.me/5524936180096", description: "D√™ visibilidade ao seu novo neg√≥cio em nossa plataforma. Fale conosco para conhecer os planos." }
            ]
        },
        cvModel: `
            <div class="bg-gray-50 p-4 sm:p-6 rounded-lg border">
                <div class="text-center mb-6">
                    <h1 class="text-2xl sm:text-3xl font-bold text-gray-800">Maria da Silva</h1>
                    <p>Brasileira, Solteira, 18 anos</p>
                    <p>Rua das Flores, 123, Centro, Rio Claro - RJ</p>
                    <p>(24) 99999-8888 | maria.silva.email@example.com</p>
                    <p><a href="https://linkedin.com/in/mariadasilva" class="text-blue-600 hover:underline">linkedin.com/in/mariadasilva</a></p>
                </div>

                <div class="mb-6">
                    <h2 class="text-lg sm:text-xl font-bold text-[var(--primary-dark)] border-b-2 border-teal-200 pb-1 mb-2">OBJETIVO</h2>
                    <p>Busco minha primeira oportunidade de emprego para desenvolver minhas habilidades, aprender na pr√°tica e contribuir de forma proativa para o crescimento da empresa.</p>
                </div>

                <div class="mb-6">
                    <h2 class="text-lg sm:text-xl font-bold text-[var(--primary-dark)] border-b-2 border-teal-200 pb-1 mb-2">FORMA√á√ÉO</h2>
                    <p><strong>Ensino M√©dio Completo</strong><br>
                    Col√©gio Estadual de Rio Claro, Conclus√£o em 2024</p>
                </div>

                <div class="mb-6">
                    <h2 class="text-lg sm:text-xl font-bold text-[var(--primary-dark)] border-b-2 border-teal-200 pb-1 mb-2">EXPERI√äNCIA</h2>
                    <p><strong>Volunt√°ria em Evento Escolar (Junho/2024)</strong><br>
                    - Ajudei na organiza√ß√£o e recep√ß√£o da Festa Junina da escola, respons√°vel pela barraca de doces e pelo controle do caixa.</p>
                    <p class="mt-2"><strong>Aulas de Refor√ßo (2023-2024)</strong><br>
                    - Ofereci aulas de refor√ßo de matem√°tica para alunos do ensino fundamental, desenvolvendo paci√™ncia e did√°tica.</p>
                </div>

                <div class="mb-6">
                    <h2 class="text-lg sm:text-xl font-bold text-[var(--primary-dark)] border-b-2 border-teal-200 pb-1 mb-2">HABILIDADES</h2>
                    <ul class="list-disc list-inside space-y-1">
                        <li><strong>Idiomas:</strong> Ingl√™s Intermedi√°rio (Cursando)</li>
                        <li><strong>Inform√°tica:</strong> Pacote Office (Word, Excel, PowerPoint), Canva, Redes Sociais.</li>
                        <li><strong>Compet√™ncias:</strong> Proatividade, boa comunica√ß√£o, organiza√ß√£o, aprendo r√°pido e gosto de trabalhar em equipe.</li>
                    </ul>
                </div>
            </div>
        `
    }
};

const State = {
    chartInstance: null,
    currentCity: null,
    currentFilters: { searchTerm: '', category: '', neighborhood: [], status: 'all' },
    foodGuideFilters: { searchTerm: '', delivery: false, acceptsReservations: false, outdoorSeating: false },
    eventFilter: 'Todos',
    countdownIntervals: [],
    completedHunts: [], 
    
    clearCountdownIntervals() {
        this.countdownIntervals.forEach(clearInterval);
        this.countdownIntervals = [];
    },

    clearMapInstances() {
        // Map instances cleared if needed in the future
    }
};

const App = {
    init() {
        document.addEventListener('DOMContentLoaded', () => {
            UI.renderCitySelection();
            this.navigateTo('city-selection');
            document.getElementById('mobile-menu-button').addEventListener('click', UI.toggleMobileMenu);
            window.addEventListener('scroll', UI.handleScroll);
        });
    },

    navigateTo(view, data) {
        State.clearCountdownIntervals();
        State.clearMapInstances();
        UI.showView(view);
        window.scrollTo(0, 0);

        setTimeout(() => {
            switch(view) {
                case 'city-selection':
                    State.currentCity = null;
                    UI.updateHeader("SynkLocal", false);
                    UI.renderCitySelection();
                    break;
                case 'home':
                    UI.updateHeader(`Guia de ${State.currentCity}`, true);
                    UI.renderHomeContent();
                    break;
                case 'treasure-hunt':
                    UI.renderTreasureHuntPage();
                    break;
                case 'treasure-details':
                    UI.renderTreasureDetails(data);
                    break;
                case 'culture':
                    UI.renderCulturePage(data);
                    break;
                case 'careers':
                    UI.renderCareersPage();
                    break;
                case 'food-guide':
                    UI.renderFoodGuidePage();
                    break;
                case 'results':
                    UI.renderResults(data);
                    break;
                case 'details':
                    UI.renderDetails(data);
                    break;
                case 'events':
                    UI.renderEventsPage();
                    break;
            }
        }, 50); 
    },

    selectCity(cityName) {
        State.currentCity = cityName;
        this.navigateTo('home');
    },

    filterByCategory(categoryName) {
        if (categoryName === 'Alimenta√ß√£o') {
            this.navigateTo('food-guide');
            return;
        }
        State.currentFilters = { searchTerm: '', category: categoryName, neighborhood: [], status: 'all' };
        document.getElementById('search-input-results').value = '';
        const searchInput = document.getElementById('search-input-home');
        if(searchInput) searchInput.value = '';
        this.performSearch(false);
    },
    
    filterEvents(category) {
        State.eventFilter = category;
        UI.renderEventsPage();
    },

    handleTreasureAnswer(huntId) {
        const hunt = DB.treasureHunts.find(h => h.id === huntId);
        const input = document.getElementById(`treasure-answer-${huntId}`);
        const userAnswer = input.value.trim();

        if (userAnswer.toLowerCase() === hunt.answer.toLowerCase()) {
            this.completeTreasure(huntId);
        } else {
            const feedbackEl = document.getElementById(`treasure-feedback-${huntId}`);
            feedbackEl.textContent = 'Resposta incorreta. Tente novamente!';
            feedbackEl.classList.remove('hidden');
            input.classList.add('border-red-500');
            input.classList.remove('border-gray-300');
            setTimeout(() => {
                feedbackEl.classList.add('hidden');
                input.classList.remove('border-red-500');
                input.classList.add('border-gray-300');
            }, 3000);
        }
    },
    
    completeTreasure(huntId) {
        const hunt = DB.treasureHunts.find(h => h.id === huntId);
        if (!State.completedHunts.includes(huntId)) {
            State.completedHunts.push(huntId);
        }
        UI.showTreasureSuccess(hunt);
    },

    applyFilters() {
        State.currentFilters.searchTerm = document.getElementById('search-input-results').value.toLowerCase();
        const selectedNeighborhoods = Array.from(document.querySelectorAll('.filter-neighborhood-box:checked')).map(el => el.value);
        State.currentFilters.neighborhood = selectedNeighborhoods;
        State.currentFilters.status = document.querySelector('input[name="status"]:checked').value;
        this.performSearch(false);
    },

    performSearch(fromHome = true, inputId = 'search-input-home') {
        if (fromHome) {
            State.currentFilters = { 
                searchTerm: document.getElementById(inputId).value.toLowerCase(), 
                category: '', 
                neighborhood: [], 
                status: 'all' 
            };
            document.getElementById('search-input-results').value = State.currentFilters.searchTerm;
        }

        const filteredCompanies = DB.companies.filter(company => {
            if (company.cidade !== State.currentCity) return false;

            const searchTerm = State.currentFilters.searchTerm.toLowerCase();
            const matchesSearchTerm = searchTerm ? 
                company.nome.toLowerCase().includes(searchTerm) || 
                company.descricao.toLowerCase().includes(searchTerm) ||
                (company.palavras_chave && company.palavras_chave.some(k => k.toLowerCase().includes(searchTerm))) : true;
            
            const matchesCategory = State.currentFilters.category ? company.categorias.includes(State.currentFilters.category) : true;
            const matchesNeighborhood = State.currentFilters.neighborhood.length > 0 ? State.currentFilters.neighborhood.includes(company.endereco.bairro) : true;
            const matchesStatus = State.currentFilters.status === 'open' ? Utils.isCompanyOpen(company) : true;

            return matchesSearchTerm && matchesCategory && matchesNeighborhood && matchesStatus;
        });

        this.navigateTo('results', filteredCompanies);
    },

    applyFoodFilters() {
        State.foodGuideFilters.searchTerm = document.getElementById('food-search-input').value.toLowerCase();
        State.foodGuideFilters.delivery = document.getElementById('food-filter-delivery').checked;
        State.foodGuideFilters.acceptsReservations = document.getElementById('food-filter-reservations').checked;
        State.foodGuideFilters.outdoorSeating = document.getElementById('food-filter-outdoor').checked;
        
        UI.renderFoodGuidePage(); // Re-render the page with applied filters
    },

    openQuoteModal(companyId) {
        const company = DB.companies.find(c => c.id === companyId);
        document.getElementById('modal-company-name').textContent = company.nome;
        UI.openModal('quote-modal');
    },

    sendQuote() {
        UI.showQuoteSuccess();
    }
};

const UI = {
    showView(viewId) {
        document.querySelectorAll('.view').forEach(v => {
            v.classList.add('hidden-view');
            v.classList.remove('opacity-100', 'translate-y-0');
        });
        const targetView = document.getElementById(`${viewId}-view`);
        if (targetView) {
            targetView.classList.remove('hidden-view');
            setTimeout(() => {
                targetView.classList.add('opacity-100');
                targetView.style.transform = 'translateY(0)';
            }, 10);
        }
    },

    updateHeader(title, showNav) {
        document.getElementById('main-title').textContent = title;
        const navItems = ['nav-home', 'nav-treasure', 'nav-culture', 'nav-events', 'nav-careers', 'change-city-btn'];
        navItems.forEach(id => {
            const el = document.getElementById(id);
            if (el) el.classList.toggle('hidden', !showNav);
        });
    },

    toggleMobileMenu() {
        document.getElementById('mobile-menu').classList.toggle('hidden');
    },
    
    showSkeleton(container, cardHTML, count) {
        let skeletons = '';
        for (let i = 0; i < count; i++) {
            skeletons += cardHTML;
        }
        container.innerHTML = skeletons;
    },

    renderCitySelection() {
        const grid = document.getElementById('city-grid');
        grid.innerHTML = DB.cities.map(city => `
            <div onclick="App.selectCity('${city.name}')" class="bg-white rounded-3xl shadow-lg shadow-teal-100/50 overflow-hidden cursor-pointer group transform hover:-translate-y-2 transition-all duration-300 hover:shadow-2xl hover:shadow-teal-200/60">
                <div class="h-56 overflow-hidden">
                    <img src="${city.image}" alt="Imagem de ${city.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/ffffff?text=Imagem+Indispon√≠vel';">
                </div>
                <div class="p-6">
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-800 group-hover:text-[var(--primary-dark)] transition-colors duration-300">${city.name}</h3>
                </div>
            </div>
        `).join('');
    },

    renderHomeContent() {
        const container = document.getElementById('home-view');
        container.innerHTML = `
            <section id="welcome-section" class="mb-12"></section>
            
            <section id="home-search-section" class="text-center mb-12 p-6 md:p-10 bg-white rounded-3xl shadow-xl shadow-teal-100/50">
                <h2 id="home-title" class="text-2xl sm:text-3xl md:text-4xl font-bold mb-3 tracking-tight">O que voc√™ procura em ${State.currentCity}?</h2>
                <p class="text-gray-500 max-w-2xl mx-auto mb-8 text-sm sm:text-base">Explore o com√©rcio local, descubra servi√ßos incr√≠veis e fique por dentro dos melhores eventos.</p>
                <div class="max-w-xl mx-auto flex flex-col sm:flex-row shadow-lg shadow-teal-200/50 rounded-full">
                    <input id="search-input-home" type="text" placeholder="Ex: pizzaria, show..." class="w-full p-3 sm:p-4 border border-gray-200 rounded-full sm:rounded-none sm:rounded-l-full focus:ring-2 focus:ring-[var(--primary)] focus:outline-none transition-shadow mb-2 sm:mb-0">
                    <button onclick="App.performSearch(true, 'search-input-home')" class="w-full sm:w-auto bg-[var(--primary)] text-white px-6 sm:px-8 py-3 sm:py-4 rounded-full sm:rounded-none sm:rounded-r-full font-semibold hover:bg-[var(--primary-dark)] transition-colors transform active:scale-95">Buscar</button>
                </div>
            </section>

            <section id="promotions-section" class="mb-12"></section>

            <section id="categories-section" class="mb-12">
                <h3 class="text-2xl font-bold mb-6 tracking-tight">Navegue por Categorias üß≠</h3>
                <div id="categories-grid" class="grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-5"></div>
            </section>

            <section id="events-home-section" class="mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold tracking-tight">Pr√≥ximos Eventos ü•≥</h3>
                    <a href="#" onclick="App.navigateTo('events')" class="text-[var(--primary-dark)] font-semibold hover:underline text-sm sm:text-base">Ver Todos ‚Üí</a>
                </div>
                <div id="events-home-grid" class="flex overflow-x-auto space-x-6 pb-4 scroll-container -m-2 p-2"></div>
            </section>

            <section id="featured-section" class="mb-12">
                <h3 class="text-2xl font-bold mb-6 tracking-tight">Empresas em Destaque ‚≠ê</h3>
                <div id="featured-grid" class="flex overflow-x-auto space-x-6 pb-4 scroll-container -m-2 p-2"></div>
            </section>

            <section id="new-section">
                <h3 class="text-2xl font-bold mb-6 tracking-tight">Novas Empresas üå±</h3>
                <div id="new-grid" class="flex overflow-x-auto space-x-6 pb-4 scroll-container -m-2 p-2"></div>
            </section>
        `;
        this.renderWelcomeSection();
        this.renderPromotions();
        this.renderCategories();
        this.renderHomeEvents();
        this.renderFeatured();
        this.renderNew();
    },

     renderWelcomeSection() {
        const container = document.getElementById('welcome-section');
        if (!container) return;
        container.innerHTML = `
            <section class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                <div class="bg-white rounded-3xl shadow-lg p-6 sm:p-8 text-center flex flex-col items-center transform hover:-translate-y-2 transition-all duration-300 hover:shadow-2xl cursor-pointer" onclick="document.getElementById('home-search-section').scrollIntoView({ behavior: 'smooth' });">
                    <div class="text-5xl mb-4">üè†</div>
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3">Sou morador</h3>
                    <p class="text-gray-600 mb-6 flex-grow text-sm sm:text-base">Encontre tudo o que precisa, veja as novidades e aproveite as melhores promo√ß√µes da sua cidade.</p>
                    <span class="mt-auto bg-teal-100 text-teal-800 px-6 py-2 rounded-full font-bold text-sm sm:text-base">Explorar o Com√©rcio</span>
                </div>
                <div class="bg-white rounded-3xl shadow-lg p-6 sm:p-8 text-center flex flex-col items-center transform hover:-translate-y-2 transition-all duration-300 hover:shadow-2xl cursor-pointer" onclick="App.navigateTo('culture')">
                    <div class="text-5xl mb-4">üß≠</div>
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3">Sou visitante</h3>
                    <p class="text-gray-600 mb-6 flex-grow text-sm sm:text-base">Descubra os pontos tur√≠sticos, a cultura e tudo que faz de ${State.currentCity} um lugar encantador.</p>
                    <span class="mt-auto bg-amber-100 text-amber-800 px-6 py-2 rounded-full font-bold text-sm sm:text-base">Descobrir a Regi√£o</span>
                </div>
            </section>
        `;
    },

    renderTreasureHuntPage() {
        const container = document.getElementById('treasure-hunt-content');
        const huntsInCity = DB.treasureHunts.filter(h => h.cidade === State.currentCity);

        if (huntsInCity.length === 0) {
            container.innerHTML = `
                <div class="text-center bg-white p-10 rounded-2xl shadow-lg">
                    <h2 class="text-2xl sm:text-3xl font-bold mb-4">Ca√ßa ao Tesouro üó∫Ô∏è</h2>
                    <p class="text-gray-500">Nenhuma ca√ßa ao tesouro dispon√≠vel em ${State.currentCity} no momento. Volte em breve!</p>
                </div>
            `;
            return;
        }

        container.innerHTML = `
            <div class="text-center mb-10">
                <h2 class="text-3xl sm:text-4xl md:text-5xl font-extrabold mb-3 text-[var(--text-main)] tracking-tight">Ca√ßa ao Tesouro em ${State.currentCity}</h2>
                <p class="text-base sm:text-lg text-gray-500 max-w-3xl mx-auto">Explore a cidade, desvende enigmas e ganhe pr√™mios exclusivos no com√©rcio local!</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                ${huntsInCity.map(hunt => {
                    const company = DB.companies.find(c => c.id === hunt.companyId);
                    const isCompleted = State.completedHunts.includes(hunt.id);
                    return `
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col group transition-all duration-300 ${isCompleted ? 'opacity-60' : 'hover:shadow-2xl hover:-translate-y-2'}">
                        <div class="p-6 flex-grow flex flex-col">
                            <div class="flex items-center mb-4">
                                <img src="${company.logotipo}" alt="Logo de ${company.nome}" class="w-12 h-12 rounded-full mr-4 border">
                                <div>
                                    <h4 class="font-bold">${company.nome}</h4>
                                    <p class="text-xs text-gray-500">Tesouro Local</p>
                                </div>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2 flex-grow">${hunt.title}</h3>
                            <p class="text-gray-600 text-sm mb-4"><i class="fa-solid fa-lightbulb mr-2 text-amber-500"></i><strong>Pista:</strong> "${hunt.clue}"</p>
                            <div class="mt-auto">
                                ${isCompleted ? `
                                    <div class="w-full bg-green-500 text-white text-center px-4 py-2 rounded-lg font-semibold">
                                        <i class="fa-solid fa-check-circle mr-2"></i> Conclu√≠do!
                                    </div>
                                ` : `
                                    <button onclick="App.navigateTo('treasure-details', '${hunt.id}')" class="w-full bg-amber-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-amber-600 transition-colors">
                                        Resolver Enigma <i class="fa-solid fa-arrow-right ml-2"></i>
                                    </button>
                                `}
                            </div>
                        </div>
                    </div>
                    `;
                }).join('')}
            </div>
        `;
    },

    renderTreasureDetails(huntId) {
        const container = document.getElementById('treasure-details-view');
        const hunt = DB.treasureHunts.find(h => h.id === huntId);
        if (!hunt) {
            container.innerHTML = '<p>Ca√ßa ao tesouro n√£o encontrada.</p>';
            return;
        }
        const company = DB.companies.find(c => c.id === hunt.companyId);

        container.innerHTML = `
            <button onclick="App.navigateTo('treasure-hunt')" class="bg-white text-gray-800 px-4 py-2 rounded-full mb-6 hover:bg-gray-100 transition-all shadow-md active:scale-95 text-sm">‚Üê Voltar para a lista</button>
            <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-10">
                <div class="text-center">
                    <img src="${company.logotipo}" alt="Logo de ${company.nome}" class="w-24 h-24 rounded-full mx-auto mb-4 border-2 shadow-lg">
                    <h2 class="text-2xl sm:text-3xl font-bold tracking-tight">${hunt.title}</h2>
                    <p class="text-gray-500">Um desafio proposto por <strong class="text-teal-600 cursor-pointer" onclick="App.navigateTo('details', '${company.id}')">${company.nome}</strong></p>
                </div>

                <div class="my-8 p-6 bg-amber-50 rounded-xl border-l-4 border-amber-400">
                    <h3 class="font-bold text-lg text-amber-800 mb-2"><i class="fa-solid fa-map-signs mr-2"></i>Sua Miss√£o</h3>
                    <p class="text-gray-700">${hunt.clue}</p>
                </div>

                <div class="my-8">
                    <h3 class="font-bold text-lg text-gray-800 mb-2"><i class="fa-solid fa-question-circle mr-2 text-teal-500"></i>O Enigma a ser Resolvido:</h3>
                    <p class="text-gray-700 text-lg italic p-4 bg-gray-100 rounded-lg">"${hunt.question}"</p>
                </div>
                
                <div class="mt-6">
                    <label for="treasure-answer-${hunt.id}" class="block font-semibold mb-2">Sua Resposta:</label>
                    <input id="treasure-answer-${hunt.id}" type="text" placeholder="Digite a resposta aqui..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500">
                    <p id="treasure-feedback-${hunt.id}" class="text-red-500 text-sm mt-2 hidden"></p>
                    <button onclick="App.handleTreasureAnswer('${hunt.id}')" class="w-full mt-4 bg-teal-500 text-white px-6 py-3 rounded-lg font-bold text-lg hover:bg-teal-600 transition-colors">
                        <i class="fa-solid fa-unlock-alt mr-2"></i> Desvendar!
                    </button>
                </div>
            </div>
        `;
    },

    showTreasureSuccess(hunt) {
        const container = document.getElementById('treasure-details-view');
        const company = DB.companies.find(c => c.id === hunt.companyId);

        container.innerHTML = `
            <div class="text-center bg-white rounded-2xl shadow-2xl p-8 md:p-12 transform transition-all duration-500 animate-pulse-once" style="--tw-animate-opacity: 1; --tw-animate-scale: 1.05;">
                <div class="text-6xl mb-4">üéâ</div>
                <h2 class="text-3xl font-extrabold text-green-500 mb-3">Parab√©ns!</h2>
                <p class="text-lg text-gray-700">Voc√™ desvendou o enigma de <strong>${company.nome}</strong>!</p>
                
                <div class="my-8 p-6 bg-amber-100 border-2 border-dashed border-amber-400 rounded-xl">
                    <h3 class="font-bold text-amber-800">Sua Recompensa:</h3>
                    <p class="text-2xl font-bold text-amber-900 mt-2">${hunt.reward}</p>
                    <p class="text-xs text-amber-700 mt-2">Apresente esta tela no estabelecimento para resgatar.</p>
                </div>

                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="App.navigateTo('treasure-hunt')" class="w-full sm:w-auto bg-gray-200 text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors">Ver Outros Tesouros</button>
                    <button onclick="App.navigateTo('details', '${company.id}')" class="w-full sm:w-auto bg-teal-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-teal-600 transition-colors">Visitar a Empresa</button>
                </div>
            </div>
        `;
    },

    renderPromotions() {
        const section = document.getElementById('promotions-section');
        const companiesWithPromo = DB.companies.filter(c => c.cidade === State.currentCity && c.promotion);

        if (companiesWithPromo.length === 0) {
            section.innerHTML = '';
            section.classList.add('hidden');
            return;
        }
        
        section.classList.remove('hidden');
        section.innerHTML = `
            <h3 class="text-2xl font-bold mb-6 tracking-tight">Promo√ß√µes Imperd√≠veis üî•</h3>
            <div class="flex overflow-x-auto space-x-6 pb-4 scroll-container -m-2 p-2">
                ${companiesWithPromo.map(this._createPromotionCard).join('')}
            </div>
        `;
    },

    _createPromotionCard(company) {
        const promo = company.promotion;
        return `
        <div onclick="App.navigateTo('details', '${company.id}')" class="flex-shrink-0 w-80 md:w-96 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 text-white overflow-hidden group cursor-pointer">
            <div class="p-6 flex flex-col h-full">
                <div class="flex items-start justify-between">
                    <div class="flex items-center">
                        <img src="${company.logotipo}" alt="Logo de ${company.nome}" class="w-12 h-12 rounded-full border-2 border-white/50 object-cover mr-3">
                        <div>
                            <h4 class="font-bold">${company.nome}</h4>
                            <p class="text-xs opacity-80">${company.categorias[0]}</p>
                        </div>
                    </div>
                    <span class="bg-white/20 text-white text-xs font-bold px-2 py-1 rounded-full uppercase">${promo.tag}</span>
                </div>
                <div class="my-4 flex-grow">
                    <h5 class="text-xl sm:text-2xl font-extrabold tracking-tight">${promo.title}</h5>
                    <p class="text-sm opacity-90 mt-2">${promo.description}</p>
                </div>
                <div class="mt-auto text-center font-bold text-white/80 group-hover:text-white transition-colors">
                    Ver Oferta ‚Ä∫
                </div>
            </div>
        </div>
        `;
    },

    renderCategories(gridId = 'categories-grid') {
        const grid = document.getElementById(gridId);
        if (!grid) return;
        grid.innerHTML = DB.categories.map(cat => `
            <div onclick="App.filterByCategory('${cat.name}')" class="bg-white p-3 sm:p-4 rounded-2xl shadow-md shadow-teal-100/30 text-center cursor-pointer hover:shadow-xl hover:shadow-teal-200/50 hover:-translate-y-1 transition-all duration-300 group">
                <div class="bg-teal-50 text-2xl sm:text-3xl w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto group-hover:bg-teal-100 transition-colors duration-300">${cat.icon}</div>
                <h4 class="mt-3 sm:mt-4 font-semibold text-xs sm:text-sm md:text-base text-gray-700 group-hover:text-[var(--primary-dark)]">${cat.name}</h4>
            </div>
        `).join('');
    },

    _createCompanyCard(company) {
        const verifiedIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1.5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zM9 12a1 1 0 112 0 1 1 0 01-2 0zm-1-3a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>`;
        const treasureIcon = `<div class="absolute top-2 right-2 bg-amber-400 text-white p-1.5 rounded-full shadow-md" title="Faz parte da Ca√ßa ao Tesouro!"><i class="fa-solid fa-gem"></i></div>`;
        const hasTreasure = DB.treasureHunts.some(h => h.companyId === company.id && h.cidade === State.currentCity);

        return `
        <div class="bg-white rounded-2xl shadow-lg shadow-teal-100/50 overflow-hidden flex flex-col h-full group transition-all duration-300 hover:shadow-2xl hover:shadow-teal-200/60 hover:-translate-y-2">
            <div class="relative overflow-hidden cursor-pointer" onclick="App.navigateTo('details', '${company.id}')">
                <img src="${company.galeria_fotos[0]}" alt="${company.nome}" class="w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500">
                <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                ${hasTreasure ? treasureIcon : ''}
                <div class="absolute bottom-2 left-4 text-white">
                    <h4 class="font-bold text-lg flex items-center drop-shadow-md">${company.nome} ${company.verificado ? verifiedIcon : ''}</h4>
                    <p class="text-teal-200 text-sm drop-shadow-md">${company.categorias[0]}</p>
                </div>
            </div>
            <div class="p-4 flex flex-col flex-grow">
                <p class="text-gray-500 text-sm mb-4"><span class="font-semibold">üìç</span> ${company.endereco.bairro}, ${company.endereco.cidade}</p>
                <div class="flex items-center mt-auto pt-4 border-t border-gray-100">
                    ${Utils.renderStars(Utils.calculateAverageRating(company.avaliacoes))}
                    <span class="text-xs text-gray-400 ml-2">(${company.avaliacoes.length} aval.)</span>
                    <button onclick="App.navigateTo('details', '${company.id}')" class="ml-auto bg-teal-50 text-teal-700 px-3 py-1.5 rounded-full font-semibold hover:bg-teal-100 hover:text-teal-800 transition-all text-sm transform active:scale-95">Detalhes</button>
                </div>
            </div>
        </div>
        `;
    },
    
    _createCarouselCard(company) {
        const verifiedIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1.5 text-blue-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zM9 12a1 1 0 112 0 1 1 0 01-2 0zm-1-3a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>`;
        const treasureIcon = `<div class="absolute top-2 right-2 bg-amber-400 text-white p-1 rounded-full shadow-md" title="Faz parte da Ca√ßa ao Tesouro!"><i class="fa-solid fa-gem text-xs"></i></div>`;
        const hasTreasure = DB.treasureHunts.some(h => h.companyId === company.id && h.cidade === State.currentCity);
        return `
        <div class="flex-shrink-0 w-64 sm:w-72 bg-white rounded-2xl shadow-md shadow-teal-100/40 overflow-hidden transform hover:scale-105 transition-transform group duration-300 hover:shadow-xl hover:shadow-teal-200/50">
            <div onclick="App.navigateTo('details', '${company.id}')" class="cursor-pointer relative">
                ${hasTreasure ? treasureIcon : ''}
                <div class="overflow-hidden h-36"><img src="${company.galeria_fotos[0]}" alt="${company.nome}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"></div>
                <div class="p-4">
                    <h4 class="font-bold text-md truncate flex items-center">${company.nome} ${company.verificado ? verifiedIcon : ''}</h4>
                    <p class="text-teal-600 text-sm truncate">${company.categorias[1] || company.categorias[0]}</p>
                    <p class="text-gray-500 text-xs truncate mt-1">üìç ${company.endereco.bairro}, ${company.endereco.cidade}</p>
                </div>
            </div>
        </div>
        `;
    },
    
    renderFeatured(gridId = 'featured-grid') {
        const grid = document.getElementById(gridId);
        if (!grid) return;
        const companies = DB.companies.filter(c => c.plano === 'destaque' && c.cidade === State.currentCity);
        grid.innerHTML = companies.length > 0 ? companies.map(c => this._createCarouselCard(c)).join('') : `<p class="text-gray-500 pl-2">Nenhuma empresa em destaque no momento.</p>`;
    },

    renderNew(gridId = 'new-grid') {
        const grid = document.getElementById(gridId);
        if (!grid) return;
        const companies = [...DB.companies].filter(c => c.cidade === State.currentCity).sort((a, b) => new Date(b.data_cadastro) - new Date(a.data_cadastro)).slice(0, 5);
        grid.innerHTML = companies.length > 0 ? companies.map(c => this._createCarouselCard(c)).join('') : `<p class="text-gray-500 pl-2">Nenhuma nova empresa cadastrada.</p>`;
    },
    
    _createEventCard(event) {
        const now = new Date();
        const startDate = new Date(event.data_inicio);
        const endDate = new Date(event.data_fim);
        const isHappening = now >= startDate && now <= endDate;
        const isUpcoming = now < startDate;

        let statusHTML = '';
        if (isHappening) {
            statusHTML = `<div class="absolute top-3 left-3 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full animate-pulse shadow-lg">AO VIVO</div>`;
        } else if (isUpcoming) {
            statusHTML = `<div id="countdown-${event.id}" class="absolute bottom-0 left-0 right-0 bg-black/60 text-white text-center p-2 text-sm font-semibold backdrop-blur-sm"></div>`;
        }

        const formattedDate = `${startDate.toLocaleDateString('pt-BR', { day: '2-digit', month: 'short' })} - ${startDate.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}`;
        const priceColor = event.preco && (event.preco.toLowerCase() === 'gratuito' || event.preco.toLowerCase() === 'entrada franca') ? 'text-green-600' : 'text-amber-600';

        return `
        <div class="bg-white rounded-2xl shadow-lg shadow-teal-100/50 overflow-hidden flex flex-col h-full group transform hover:-translate-y-2 transition-all duration-300 hover:shadow-2xl hover:shadow-teal-200/60">
            <div class="relative">
                <img src="${event.imagem}" alt="${event.nome}" class="w-full h-56 object-cover group-hover:scale-110 transition-transform duration-500">
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent z-10"></div>
                ${statusHTML}
                <div class="absolute top-3 right-3 bg-white/90 text-teal-800 text-xs font-bold px-3 py-1.5 rounded-full backdrop-blur-sm shadow-md">${event.categoria}</div>
            </div>
            <div class="p-5 flex flex-col flex-grow">
                <p class="text-sm font-bold text-teal-500 mb-1">${formattedDate}</p>
                <h4 class="font-extrabold text-xl text-[var(--text-main)] mb-2 tracking-tight">${event.nome}</h4>
                <p class="text-gray-600 text-sm mb-4 flex-grow">${event.descricao}</p>
                
                <div class="space-y-3 text-sm text-gray-700 mt-auto pt-4 border-t border-gray-100">
                    <div class="flex items-center"><span class="w-5 mr-2 text-center text-gray-500"><i class="fa-solid fa-user-tie"></i></span><strong>Organizador:</strong><span class="ml-2">${event.organizador || 'N√£o informado'}</span></div>
                    <div class="flex items-center"><span class="w-5 mr-2 text-center text-gray-500"><i class="fa-solid fa-map-marker-alt"></i></span><strong>Local:</strong><span class="ml-2">${event.local}</span></div>
                    <div class="flex items-center"><span class="w-5 mr-2 text-center text-gray-500"><i class="fa-solid fa-dollar-sign"></i></span><strong>Pre√ßo:</strong><span class="ml-2 font-bold ${priceColor}">${event.preco || 'Consultar'}</span></div>
                    <div class="flex items-center"><span class="w-5 mr-2 text-center text-gray-500"><i class="fa-solid fa-bullseye"></i></span><strong>P√∫blico:</strong><span class="ml-2">${event.publico_alvo || 'Todos'}</span></div>
                </div>

                ${event.tags && event.tags.length > 0 ? `
                <div class="mt-4 pt-3 border-t border-gray-100">
                    <div class="flex flex-wrap gap-2">
                        ${event.tags.map(tag => `<span class="bg-gray-200 text-gray-700 text-xs font-semibold px-2 py-1 rounded-full">${tag}</span>`).join('')}
                    </div>
                </div>
                ` : ''}
            </div>
        </div>
        `;
    },
    
    renderHomeEvents(gridId = 'events-home-grid') {
        const grid = document.getElementById(gridId);
        if (!grid) return;
        const upcomingEvents = [...DB.events].filter(e => e.cidade === State.currentCity && new Date(e.data_fim) > new Date()).sort((a, b) => new Date(a.data_inicio) - new Date(b.data_inicio)).slice(0, 5);
        grid.innerHTML = upcomingEvents.length > 0 ? upcomingEvents.map(event => `<div class="flex-shrink-0 w-80">${this._createEventCard(event)}</div>`).join('') : `<p class="text-gray-500 pl-2">Nenhum evento programado.</p>`;
        this.startCountdowns();
    },

    renderEventsPage() {
        document.getElementById('events-title').textContent = `Eventos em ${State.currentCity}`;
        
        const allEventsInCity = DB.events.filter(e => e.cidade === State.currentCity);
        const eventCategories = ['Todos', ...new Set(allEventsInCity.map(e => e.categoria))];
        
        const filtersContainer = document.getElementById('event-filters');
        filtersContainer.innerHTML = eventCategories.map(cat => `
            <button onclick="App.filterEvents('${cat}')" class="filter-btn px-4 py-2 text-sm font-semibold rounded-full whitespace-nowrap ${State.eventFilter === cat ? 'active bg-white border-2' : 'bg-white text-gray-700 hover:bg-gray-100 shadow-sm hover:shadow-md border-2 border-transparent'}">
                ${cat}
            </button>
        `).join('');

        const now = new Date();
        const filteredEvents = State.eventFilter === 'Todos' 
            ? allEventsInCity 
            : allEventsInCity.filter(e => e.categoria === State.eventFilter);
            
        const happeningNowEvents = filteredEvents.filter(e => now >= new Date(e.data_inicio) && now <= new Date(e.data_fim)).sort((a, b) => new Date(a.data_inicio) - new Date(b.data_inicio));
        const upcomingEvents = filteredEvents.filter(e => now < new Date(e.data_inicio)).sort((a, b) => new Date(a.data_inicio) - new Date(b.data_inicio));

        const happeningNowContainer = document.getElementById('happening-now-section');
        const upcomingEventsContainer = document.getElementById('upcoming-events-section');
        const noEventsMsg = document.getElementById('no-events');

        if (happeningNowEvents.length > 0) {
            happeningNowContainer.innerHTML = `
                <h3 class="text-2xl font-bold mb-6 mt-8 border-l-4 border-red-400 pl-4 tracking-tight">Acontecendo Agora</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    ${happeningNowEvents.map(event => this._createEventCard(event)).join('')}
                </div>
            `;
        } else {
            happeningNowContainer.innerHTML = '';
        }

        if (upcomingEvents.length > 0) {
            upcomingEventsContainer.innerHTML = `
                <h3 class="text-2xl font-bold mb-6 mt-8 border-l-4 border-teal-400 pl-4 tracking-tight">Pr√≥ximos Eventos</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    ${upcomingEvents.map(event => this._createEventCard(event)).join('')}
                </div>
            `;
        } else {
            upcomingEventsContainer.innerHTML = '';
        }
        
        noEventsMsg.classList.toggle('hidden', happeningNowEvents.length > 0 || upcomingEvents.length > 0);

        this.startCountdowns();
    },
    
    startCountdowns() {
        State.clearCountdownIntervals();
        const upcomingEvents = DB.events.filter(e => new Date(e.data_inicio) > new Date());
        upcomingEvents.forEach(event => {
            const countdownElement = document.getElementById(`countdown-${event.id}`);
            if (countdownElement) {
                const interval = setInterval(() => {
                    const countdown = Utils.formatCountdown(event.data_inicio);
                    if (countdown) {
                        countdownElement.innerHTML = `Come√ßa em: ${countdown}`;
                    } else {
                        countdownElement.parentElement.innerHTML = `<div class="absolute top-3 left-3 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full animate-pulse shadow-lg">AO VIVO</div>` + countdownElement.parentElement.innerHTML;
                        countdownElement.remove();
                        clearInterval(interval);
                    }
                }, 1000);
                State.countdownIntervals.push(interval);
            }
        });
    },
    
    renderFilters() {
        const container = document.getElementById('filter-neighborhood');
        const neighborhoods = [...new Set(DB.companies.filter(c => c.cidade === State.currentCity).map(c => c.endereco.bairro))];
        container.innerHTML = neighborhoods.map(n => `
            <div class="flex items-center">
                <input type="checkbox" id="n-${n.replace(/\s+/g, '')}" value="${n}" class="h-4 w-4 text-teal-500 border-gray-300 rounded focus:ring-teal-400 filter-neighborhood-box">
                <label for="n-${n.replace(/\s+/g, '')}" class="ml-2 text-sm">${n}</label>
            </div>
        `).join('') || '<p class="text-xs text-gray-500">Nenhum bairro para filtrar.</p>';
    },
    
    renderResults(companies) {
        const grid = document.getElementById('results-grid');
        const noResultsMsg = document.getElementById('no-results');
        const title = document.getElementById('results-title');

        if (State.currentFilters.category) {
            title.textContent = `Resultados para "${State.currentFilters.category}"`;
        } else if(State.currentFilters.searchTerm) {
             title.textContent = `Resultados para "${State.currentFilters.searchTerm}"`;
        } else {
             title.textContent = `Todos os resultados em ${State.currentCity}`;
        }

        this.renderFilters();

        if (companies.length > 0) {
            grid.innerHTML = companies.map(this._createCompanyCard).join('');
            grid.classList.remove('hidden');
            noResultsMsg.classList.add('hidden');
        } else {
            grid.innerHTML = '';
            grid.classList.add('hidden');
            noResultsMsg.classList.remove('hidden');
        }
    },
    
    renderDetails(companyId) {
        const container = document.getElementById('details-view');
        const skeletonHTML = `<div class="w-full h-96 skeleton-card"></div>`;
        this.showSkeleton(container, skeletonHTML, 1);

        setTimeout(() => {
            const company = DB.companies.find(c => c.id === companyId);
            if (!company) {
                container.innerHTML = `<p>Empresa n√£o encontrada.</p><button onclick="App.navigateTo('home')" class="mt-4 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300">Voltar</button>`;
                return;
            }

            const avgRating = Utils.calculateAverageRating(company.avaliacoes);
            const companyEvent = DB.events.find(event => event.local === company.nome && event.cidade === company.cidade && new Date(event.data_inicio) > new Date());
            const verifiedIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ml-2 text-blue-500" viewBox="0 0 20 20" fill="currentColor" title="Verificado"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zM9 12a1 1 0 112 0 1 1 0 01-2 0zm-1-3a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>`;
            
            let sobreNosHTML = '';

            if (company.sobreNos) {
                const backgroundImageUrl = company.id === 'sulnet-telecom' 
                    ? 'https://images.unsplash.com/photo-1614850523011-8f495a764ac3?q=80&w=2070&auto=format&fit=crop'
                    : company.galeria_fotos[1] || company.galeria_fotos[0];

                sobreNosHTML = `
                <div class="space-y-12 md:space-y-16">
                    <section class="relative rounded-3xl overflow-hidden text-white p-8 md:p-12 flex items-center justify-center text-center h-64 sm:h-80 bg-fixed" style="background-image: url('${backgroundImageUrl}'); background-size: cover;">
                        <div class="absolute inset-0 bg-gray-900/50 mix-blend-multiply"></div>
                        <div class="relative z-10">
                            <h3 class="text-3xl md:text-5xl font-extrabold tracking-tight drop-shadow-lg">A Jornada da ${company.nome}</h3>
                            <p class="mt-4 max-w-2xl mx-auto text-base sm:text-lg md:text-xl opacity-90 drop-shadow-md">${company.sobreNos.historia}</p>
                        </div>
                    </section>
                    
                    <section class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                        <div class="md:col-span-1 flex justify-center">
                             <img src="${company.sobreNos.fundador.foto}" alt="Foto de ${company.sobreNos.fundador.nome}" class="w-48 h-48 rounded-full shadow-2xl border-4 border-white object-cover">
                        </div>
                        <div class="md:col-span-2 bg-teal-50/40 p-6 rounded-2xl text-center md:text-left">
                            <h4 class="text-2xl font-bold text-gray-800">${company.sobreNos.fundador.nome}</h4>
                            <p class="text-sm text-gray-500 mb-3">Fundador(a) & Vision√°rio(a)</p>
                            <p class="text-gray-700 text-lg italic border-l-4 md:border-l-4 border-teal-400 pl-4">"${company.sobreNos.fundador.citacao}"</p>
                        </div>
                    </section>

                    <section>
                        <h3 class="text-2xl md:text-3xl font-bold mb-8 text-center tracking-tight">Nosso DNA: Os Pilares do Neg√≥cio</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            ${company.sobreNos.valores.map(valor => `
                                <div class="jornada-valor-card bg-teal-50/30 p-6 rounded-2xl border border-teal-100 text-center">
                                    <div class="bg-white text-teal-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 shadow-md">
                                        <i class="${valor.icone} text-2xl"></i>
                                    </div>
                                    <h5 class="font-bold text-lg text-gray-800">${valor.titulo}</h5>
                                    <p class="text-sm text-gray-600 mt-2">${valor.descricao}</p>
                                </div>
                            `).join('')}
                        </div>
                    </section>

                    <section>
                        <h3 class="text-2xl md:text-3xl font-bold mb-8 text-center tracking-tight">As Pessoas Por Tr√°s do Sucesso</h3>
                        <div class="team-mosaic grid grid-cols-2 md:grid-cols-4 gap-4">
                        ${(company.sobreNos.teamGallery || []).map((member, index) => `
                            <a href="#" class="block rounded-2xl overflow-hidden shadow-lg ${index === 0 ? 'col-span-2 row-span-2' : ''}">
                                <img src="${member.img}" alt="Foto de ${member.name}" class="w-full h-full object-cover">
                            </a>
                        `).join('')}
                        </div>
                    </section>
                </div>
                `;
            } else {
                sobreNosHTML = `<h3 class="text-xl font-bold mb-4 border-b border-teal-100 pb-2">Sobre</h3>
                                <p class="text-gray-700 leading-relaxed mb-8 prose">${company.descricao}</p>`;
            }

            container.innerHTML = `
                <button onclick="history.back()" class="bg-gray-100 text-gray-800 px-5 py-2.5 rounded-full mb-8 hover:bg-gray-200 transition-all shadow active:scale-95 text-sm font-semibold">‚Üê Voltar</button>
                <div class="flex flex-col md:flex-row md:space-x-10 items-center">
                    <div class="md:w-1/3 mb-6 md:mb-0 text-center flex-shrink-0">
                        <img src="${company.logotipo}" alt="Logotipo de ${company.nome}" class="w-32 h-32 sm:w-40 sm:h-40 rounded-full mx-auto shadow-2xl shadow-teal-200/80 border-4 border-white -mt-20 md:-mt-24">
                    </div>
                    <div class="md:w-2/3 text-center md:text-left">
                        <div class="flex flex-wrap gap-2 mb-4 justify-center md:justify-start">
                            ${company.categorias.map(cat => `<span class="bg-teal-100 text-teal-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">${cat}</span>`).join('')}
                        </div>
                        <h2 class="text-3xl sm:text-4xl font-extrabold mb-2 flex items-center justify-center md:justify-start tracking-tight">${company.nome} ${company.verificado ? verifiedIcon : ''}</h2>
                        <div class="flex items-center mb-4 justify-center md:justify-start">
                            ${Utils.renderStars(avgRating)}
                            <span class="text-sm text-gray-500 ml-2">${avgRating.toFixed(1)} de 5 (${company.avaliacoes.length} avalia√ß√µes)</span>
                        </div>
                    </div>
                </div>
                
                ${companyEvent ? `
                <div class="my-8 p-5 rounded-2xl bg-gradient-to-r from-blue-400 to-teal-400 text-white cursor-pointer shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300" onclick="App.navigateTo('events')">
                    <h3 class="text-xl font-bold mb-2">üéâ Pr√≥ximo Evento Aqui!</h3>
                    <p>${companyEvent.nome} em ${new Date(companyEvent.data_inicio).toLocaleDateString('pt-BR')}. Clique para ver mais!</p>
                </div>
                ` : ''}

                <div class="mt-10 grid grid-cols-1 lg:grid-cols-3 gap-10">
                    <div class="lg:col-span-2">
                        ${sobreNosHTML}

                        ${company.videoUrl && company.videoUrl !== "https://www.youtube.com/embed/dQw4w9WgXcQ" ? `
                        <h3 class="text-xl font-bold mb-4 border-b border-teal-100 pb-2 mt-12">Apresenta√ß√£o</h3>
                        <div class="aspect-w-16 aspect-h-9 mb-8 rounded-2xl overflow-hidden shadow-lg bg-black">
                            <iframe class="w-full h-full" src="${company.videoUrl.replace('watch?v=', 'embed/')}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                        ` : ''}
                        
                        ${company.destaques ? `
                        <h3 class="text-xl font-bold mb-4 border-b border-teal-100 pb-2 mt-12">Destaques</h3>
                        <ul class="list-none space-y-3 mb-8">
                            ${company.destaques.map(d => `<li class="flex items-start"><span class="text-green-500 mr-3 mt-1">‚úî</span><span>${d}</span></li>`).join('')}
                        </ul>
                        ` : ''}

                        ${company.servicosProdutos && company.servicosProdutos.length > 0 ? `
                        <h3 class="text-xl font-bold mb-4 border-b border-teal-100 pb-2 mt-12">Servi√ßos e Produtos</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8">
                            ${company.servicosProdutos.map(item => `
                                <div class="bg-white rounded-xl shadow-lg p-4 sm:p-6 border border-gray-100 hover:shadow-xl hover:border-teal-200 transition-all duration-300 transform hover:-translate-y-1">
                                    <div class="flex flex-col sm:flex-row justify-between items-start gap-2">
                                        <h4 class="font-bold text-lg text-gray-800">${item.nome}</h4>
                                        <span class="flex-shrink-0 text-sm font-bold text-teal-700 bg-teal-100 px-3 py-1 rounded-full mt-2 sm:mt-0">${item.preco}</span>
                                    </div>
                                    <p class="text-gray-600 leading-relaxed mt-2">${item.descricao}</p>
                                </div>
                            `).join('')}
                        </div>
                        ` : ''}

                        <h3 class="text-xl font-bold mb-4 border-b border-teal-100 pb-2 mt-12">Galeria de Fotos</h3>
                        <div class="mb-8">
                            <div class="mb-4 rounded-2xl overflow-hidden shadow-xl shadow-teal-100/50">
                                <img id="gallery-main-image" src="${company.galeria_fotos[0]}" alt="Foto principal de ${company.nome}" class="w-full h-64 md:h-96 object-cover transition-opacity duration-300">
                            </div>
                            <div id="gallery-thumbnails" class="flex overflow-x-auto space-x-3 pb-2 scroll-container">
                                ${company.galeria_fotos.map((foto, index) => `
                                    <img src="${foto}" 
                                         alt="Thumbnail ${index + 1} de ${company.nome}" 
                                         class="w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-xl cursor-pointer border-4 ${index === 0 ? 'border-teal-500' : 'border-transparent'} hover:border-teal-400 transition-all duration-200"
                                         onclick="UI.updateMainGalleryImage(this)">
                                `).join('')}
                            </div>
                        </div>

                        <h3 class="text-xl font-bold mb-4 border-b border-teal-100 pb-2 mt-12">Opini√£o dos Clientes</h3>
                        <div class="relative w-full max-w-lg mx-auto h-64 mb-8"><canvas id="reviewsChart"></canvas></div>
                        <div class="space-y-4">
                            ${company.avaliacoes.map(review => `
                            <div class="bg-teal-50/50 p-4 rounded-xl border border-teal-100">
                                <div class="flex items-center mb-1">
                                    ${Utils.renderStars(review.nota)}
                                    <p class="ml-3 font-bold">${review.usuario}</p>
                                </div>
                                <p class="text-gray-700 italic">"${review.comentario}"</p>
                            </div>
                            `).join('')}
                        </div>
                        
                        <div id="recommendations" class="mt-12"></div>
                    </div>

                    <div class="lg:col-span-1">
                         <div class="bg-teal-50/60 p-4 sm:p-6 rounded-2xl lg:sticky top-28 border border-teal-100">
                            <h3 class="text-xl font-bold mb-4 tracking-tight">Informa√ß√µes</h3>
                            <div class="space-y-4 text-sm">
                                <p><strong>üìç Endere√ßo:</strong><br>${company.endereco.rua}, ${company.endereco.bairro}</p>
                                <p><strong>‚è∞ Hor√°rio Hoje:</strong><br><span class="${Utils.isCompanyOpen(company) ? 'text-green-600 font-bold' : 'text-red-600 font-bold'}">${Utils.getTodaysHours(company)}</span></p>
                                <div class="space-y-3 pt-4 border-t mt-4 border-teal-200/50">
                                     <a href="https://wa.me/${company.contato.whatsapp}" target="_blank" class="flex items-center justify-center w-full bg-green-500 text-white px-4 py-3 rounded-xl font-semibold hover:bg-green-600 transition-all transform active:scale-95">üí¨ WhatsApp</a>
                                     <button onclick="App.openQuoteModal('${company.id}')" class="flex items-center justify-center w-full bg-blue-500 text-white px-4 py-3 rounded-xl font-semibold hover:bg-blue-600 transition-all transform active:scale-95">‚úâÔ∏è Pedir Or√ßamento</button>
                                     ${company.contato.website ? `<a href="${company.contato.website}" target="_blank" class="flex items-center justify-center w-full bg-gray-600 text-white px-4 py-3 rounded-xl font-semibold hover:bg-gray-700 transition-all transform active:scale-95">üåê Website</a>` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            this.renderReviewsChart(company.avaliacoes);
            this.renderRecommendations(company);
        }, 500);
    },
    
    updateMainGalleryImage(clickedThumbnail) {
        const detailsMainImage = document.getElementById('gallery-main-image');
        const spotCard = clickedThumbnail.closest('.tourist-spot-card');

        let mainImage;
        if (spotCard) {
            mainImage = spotCard.querySelector('.gallery-main-image');
        } else if(detailsMainImage) {
            mainImage = detailsMainImage;
        } else {
            return;
        }
        
        const newSrc = clickedThumbnail.src;
        
        const thumbnailsContainer = clickedThumbnail.parentElement;
        thumbnailsContainer.querySelectorAll('img').forEach(thumb => {
            thumb.classList.remove('border-teal-500');
            thumb.classList.add('border-transparent');
        });
        clickedThumbnail.classList.remove('border-transparent');
        clickedThumbnail.classList.add('border-teal-500');

        mainImage.classList.add('opacity-50');
        setTimeout(() => {
            mainImage.src = newSrc;
            mainImage.classList.remove('opacity-50');
        }, 300);
    },

    renderRecommendations(currentCompany) {
        const container = document.getElementById('recommendations');
        const recommendations = DB.companies.filter(c => 
            c.id !== currentCompany.id && 
            c.cidade === currentCompany.cidade &&
            c.categorias.some(cat => currentCompany.categorias.includes(cat))
        ).slice(0, 2);

        if(recommendations.length > 0) {
            container.innerHTML = `
                <h3 class="text-xl font-bold mt-12 mb-4 border-b border-teal-100 pb-2">Voc√™ tamb√©m pode gostar</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    ${recommendations.map(this._createCompanyCard).join('')}
                </div>
            `;
        } else {
            container.innerHTML = '';
        }
    },

    renderCulturePage(data) {
        const container = document.getElementById('culture-content');
        const city = DB.cities.find(c => c.name === State.currentCity);

        if (!city || !city.culture) {
            container.innerHTML = `<div class="bg-white rounded-3xl shadow-lg p-10 text-center"><h2 class="text-3xl font-bold mb-4">Cultura de ${State.currentCity}</h2> <p class="text-gray-500">Conte√∫do sobre a cultura desta cidade estar√° dispon√≠vel em breve.</p></div>`;
            return;
        }
        
        container.innerHTML = `
            <div class="text-center mb-8 md:mb-10">
                <h2 class="text-3xl md:text-5xl font-extrabold mb-3 text-[var(--text-main)] tracking-tight">Cultura e Turismo de ${city.name}</h2>
                <p class="text-base sm:text-lg text-gray-500 max-w-3xl mx-auto">Uma jornada pela hist√≥ria, sabores e belezas que definem este lugar √∫nico.</p>
            </div>
            <div class="border-b border-gray-200 mb-6 sm:mb-8">
                <nav class="-mb-px flex space-x-4 sm:space-x-6 justify-center overflow-x-auto scroll-container pb-2">
                    <button onclick="UI.switchCultureTab('history', this)" class="tab-btn whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm sm:text-lg">Hist√≥ria</button>
                    <button onclick="UI.switchCultureTab('tourism', this)" class="tab-btn whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm sm:text-lg">Turismo</button>
                    <button onclick="UI.switchCultureTab('legends', this)" class="tab-btn whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm sm:text-lg">Lendas</button>
                    <button onclick="UI.switchCultureTab('people', this)" class="tab-btn whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm sm:text-lg">Pessoas</button>
                </nav>
            </div>
            <div id="culture-history-tab" class="tab-content"></div>
            <div id="culture-tourism-tab" class="tab-content hidden"></div>
            <div id="culture-legends-tab" class="tab-content hidden"></div>
            <div id="culture-people-tab" class="tab-content hidden"></div>
        `;
        
        const initialTab = data?.tab || 'history';
        const initialButton = container.querySelector(`.tab-btn[onclick*="'${initialTab}'"]`);
        this.switchCultureTab(initialTab, initialButton || container.querySelector('.tab-btn'));
    },

    switchCultureTab(tabName, clickedButton) {
        document.querySelectorAll('#culture-content .tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('#culture-content .tab-content').forEach(content => content.classList.add('hidden'));

        clickedButton.classList.add('active');
        document.getElementById(`culture-${tabName}-tab`).classList.remove('hidden');

        State.clearMapInstances();

        if(tabName === 'history') {
            this.renderCultureHistoryTab();
        } else if (tabName === 'tourism') {
            this.renderCultureTourismTab();
        } else if (tabName === 'legends') {
            this.renderCultureLegendsTab();
        } else if (tabName === 'people') {
            this.renderCulturePeopleTab();
        }
    },

    renderCultureHistoryTab() {
        const container = document.getElementById('culture-history-tab');
        const city = DB.cities.find(c => c.name === State.currentCity);
         container.innerHTML = `
            <div class="space-y-16">
                ${city.culture.timeline ? `
                <section>
                    <h3 class="text-2xl md:text-3xl font-bold mb-8 text-center tracking-tight">Uma Viagem pela Hist√≥ria üìú</h3>
                    <div class="timeline">
                        ${city.culture.timeline.map((item, index) => `
                            <div class="timeline-container ${index % 2 === 0 ? 'left' : 'right'}">
                                <div class="timeline-content">
                                    <h4 class="year">${item.year}</h4>
                                    <h5 class="title">${item.title}</h5>
                                    <p class="event-desc">${item.event}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </section>` : ''}
                ${city.culture.gastronomia && city.culture.gastronomia.length > 0 ? `
                <section>
                    <h3 class="text-2xl md:text-3xl font-bold mb-8 text-center tracking-tight">Sabores da Terra üç≤</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        ${city.culture.gastronomia.map(item => `
                            <div class="bg-white rounded-2xl shadow-lg overflow-hidden group">
                                <div class="h-48 overflow-hidden">
                                    <img src="${item.imagem}" alt="${item.nome}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                                </div>
                                <div class="p-6">
                                    <h4 class="font-bold text-xl text-gray-800">${item.nome}</h4>
                                    <p class="text-gray-600 mt-2">${item.desc}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </section>` : ''}
            </div>
        `;
    },

    renderCultureTourismTab() {
        const container = document.getElementById('culture-tourism-tab');
        const city = DB.cities.find(c => c.name === State.currentCity);
        const tourism = city.culture.tourism;

        if (!tourism || !tourism.spots || tourism.spots.length === 0) {
            container.innerHTML = `<p class="text-center text-gray-500 py-10">Informa√ß√µes tur√≠sticas para ${city.name} estar√£o dispon√≠veis em breve.</p>`;
            return;
        }

        container.innerHTML = `
            <div class="space-y-12">
                <p class="text-lg text-center text-gray-600 max-w-3xl mx-auto">${tourism.intro}</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    ${tourism.spots.map((spot, spotIndex) => `
                        <div class="bg-white rounded-2xl shadow-lg overflow-hidden group flex flex-col tourist-spot-card">
                            <div class="h-56 overflow-hidden">
                                <img id="spot-main-image-${spotIndex}" src="${spot.gallery[0]}" alt="Imagem de ${spot.name}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 gallery-main-image" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/ffffff?text=Imagem+Indispon√≠vel';">
                            </div>
                            <div class="p-6 flex flex-col flex-grow">
                                <span class="text-sm font-bold text-teal-600 mb-1">${spot.type}</span>
                                <h4 class="text-xl font-bold text-gray-800 mb-2">${spot.name}</h4>
                                <p class="text-gray-600 text-sm flex-grow">${spot.description}</p>
                                <div class="flex overflow-x-auto space-x-2 pt-4 mt-4 border-t scroll-container">
                                    ${spot.gallery.map((img, thumbIndex) => `
                                        <img src="${img}" class="w-16 h-16 object-cover rounded-md cursor-pointer border-2 ${thumbIndex === 0 ? 'border-teal-500' : 'border-transparent'}" onclick="UI.updateMainGalleryImage(this)">
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    },

    renderCultureLegendsTab() {
        const container = document.getElementById('culture-legends-tab');
        const city = DB.cities.find(c => c.name === State.currentCity);
        const legends = city.culture.legends;

        if (!legends || legends.length === 0) {
            container.innerHTML = `<p class="text-center text-gray-500 py-10">Nenhuma lenda para ${city.name} foi adicionada ainda.</p>`;
            return;
        }

        container.innerHTML = `
            <div class="space-y-12">
                <h3 class="text-2xl md:text-3xl font-bold text-center tracking-tight">Contos e Mist√©rios da Regi√£o üëª</h3>
                ${legends.map(legend => `
                    <div class="flex flex-col md:flex-row gap-8 bg-white p-4 sm:p-6 rounded-2xl shadow-lg items-center">
                        <div class="w-full md:w-1/3 mb-4 md:mb-0">
                            <img src="${legend.image}" alt="Ilustra√ß√£o para ${legend.title}" class="w-full h-64 object-cover rounded-xl shadow-md">
                        </div>
                        <div class="w-full md:w-2/3">
                            <h4 class="text-2xl font-bold text-gray-800 mb-3">${legend.title}</h4>
                            <p class="text-gray-600 leading-relaxed prose">${legend.story}</p>
                        </div>
                    </div>
                `).join('')}
            </div>
        `;
    },

    renderCulturePeopleTab() {
        const container = document.getElementById('culture-people-tab');
        const city = DB.cities.find(c => c.name === State.currentCity);
        const people = city.culture.peopleStories;

        if (!people || people.length === 0) {
            container.innerHTML = `<p class="text-center text-gray-500 py-10">Nenhuma hist√≥ria para ${city.name} foi adicionada ainda.</p>`;
            return;
        }
        
        container.innerHTML = `
            <div class="space-y-12">
                 <h3 class="text-2xl md:text-3xl font-bold text-center tracking-tight">As Pessoas que Fazem a Cidade ‚ù§Ô∏è</h3>
                ${people.map(person => `
                    <div class="flex flex-col md:flex-row gap-8 bg-white p-4 sm:p-6 rounded-2xl shadow-lg items-center odd:md:flex-row-reverse">
                        <div class="w-full md:w-1/3 mb-4 md:mb-0">
                            <img src="${person.photo}" alt="Foto de ${person.name}" class="w-full h-80 object-cover rounded-xl shadow-md">
                        </div>
                        <div class="w-full md:w-2/3">
                            <h4 class="text-2xl font-bold text-gray-800 mb-3">${person.name}</h4>
                            <p class="text-gray-600 leading-relaxed prose">${person.story}</p>
                        </div>
                    </div>
                `).join('')}
            </div>
        `;
    },

    renderFoodGuidePage() {
        const container = document.getElementById('food-guide-content');
        const { searchTerm, delivery, acceptsReservations, outdoorSeating } = State.foodGuideFilters;

        const allRestaurants = DB.companies.filter(c => c.cidade === State.currentCity && c.categorias.includes('Alimenta√ß√£o'));
        
        const filteredRestaurants = allRestaurants.filter(r => {
            const matchesSearch = searchTerm ? r.nome.toLowerCase().includes(searchTerm) || r.descricao.toLowerCase().includes(searchTerm) : true;
            const matchesDelivery = delivery ? r.delivery === true : true;
            const matchesReservations = acceptsReservations ? r.acceptsReservations === true : true;
            const matchesOutdoor = outdoorSeating ? r.outdoorSeating === true : true;
            return matchesSearch && matchesDelivery && matchesReservations && matchesOutdoor;
        });

        container.innerHTML = `
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-5xl font-extrabold mb-3 text-[var(--text-main)] tracking-tight">Guia Gastron√¥mico üçî</h2>
                <p class="text-lg text-gray-500 max-w-3xl mx-auto">Encontre os melhores sabores de ${State.currentCity}.</p>
            </div>
            
            <aside class="mb-8">
                <div class="bg-white p-4 sm:p-6 rounded-2xl shadow-lg">
                    <h3 class="text-xl font-bold mb-4">Filtros Especiais</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                        <div class="lg:col-span-2">
                            <label for="food-search-input" class="font-semibold block mb-2 text-sm">Buscar restaurante:</label>
                            <input id="food-search-input" type="text" placeholder="Nome ou tipo de comida..." class="w-full p-2 border border-gray-200 rounded-lg" value="${searchTerm}">
                        </div>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:flex md:flex-col gap-2">
                             <label class="flex items-center cursor-pointer"><input type="checkbox" id="food-filter-delivery" class="h-4 w-4 text-teal-500 rounded" ${delivery ? 'checked' : ''}><span class="ml-2 text-sm">Faz Delivery</span></label>
                             <label class="flex items-center cursor-pointer"><input type="checkbox" id="food-filter-reservations" class="h-4 w-4 text-teal-500 rounded" ${acceptsReservations ? 'checked' : ''}><span class="ml-2 text-sm">Aceita Reservas</span></label>
                             <label class="flex items-center cursor-pointer"><input type="checkbox" id="food-filter-outdoor" class="h-4 w-4 text-teal-500 rounded" ${outdoorSeating ? 'checked' : ''}><span class="ml-2 text-sm">√Årea Externa</span></label>
                        </div>
                        <div>
                             <button onclick="App.applyFoodFilters()" class="w-full bg-[var(--primary)] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[var(--primary-dark)]">Aplicar</button>
                        </div>
                    </div>
                </div>
            </aside>
            
            <div id="food-guide-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8">
                ${filteredRestaurants.length > 0 ? filteredRestaurants.map(this._createCompanyCard).join('') : '<p class="col-span-full text-center text-gray-500 py-10">Nenhum restaurante encontrado com esses filtros.</p>'}
            </div>
        `;
    },

    renderCareersPage() {
        const container = document.getElementById('careers-content');
        container.innerHTML = `
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-5xl font-extrabold mb-3 text-[var(--text-main)] tracking-tight">Carreiras & Oportunidades üöÄ</h2>
                <p class="text-lg text-gray-500 max-w-3xl mx-auto">Construa seu futuro e encontre vagas em nossa comunidade.</p>
            </div>
            <div class="border-b border-gray-200 mb-8">
                <nav class="-mb-px flex space-x-6 justify-center overflow-x-auto scroll-container pb-2">
                    <button onclick="UI.switchCareersTab('guide', this)" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg">Guia de Carreira</button>
                    <button onclick="UI.switchCareersTab('jobs', this)" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg">Vagas de Emprego</button>
                    <button onclick="UI.switchCareersTab('entrepreneurship', this)" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg">Empreendedorismo</button>
                </nav>
            </div>
            <div id="careers-guide-tab" class="tab-content"></div>
            <div id="careers-jobs-tab" class="tab-content hidden"></div>
            <div id="careers-entrepreneurship-tab" class="tab-content hidden"></div>
        `;
        this.switchCareersTab('guide', container.querySelector('.tab-btn'));
    },

    switchCareersTab(tabName, clickedButton) {
        document.querySelectorAll('#careers-content .tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('#careers-content .tab-content').forEach(content => content.classList.add('hidden'));

        clickedButton.classList.add('active');
        document.getElementById(`careers-${tabName}-tab`).classList.remove('hidden');

        if (tabName === 'guide') {
            this.renderCareerGuideContent();
        } else if (tabName === 'jobs') {
            this.renderJobsContent();
        } else if (tabName === 'entrepreneurship') {
            this.renderEntrepreneurshipContent();
        }
    },

    renderCareerGuideContent() {
        const container = document.getElementById('careers-guide-tab');
        container.innerHTML = `
             <div class="text-center mb-10">
                  <h3 class="text-2xl font-bold tracking-tight">Comece a Planejar seu Futuro</h3>
                  <p class="text-gray-500 mt-2">Dicas para quem est√° no ensino m√©dio ou rec√©m-formado.</p>
             </div>
             <div class="border-b border-gray-200 mb-8">
                  <nav id="inner-careers-nav" class="-mb-px flex space-x-4 sm:space-x-6 justify-center overflow-x-auto scroll-container pb-2">
                        <button onclick="UI.switchInnerCareersTab('high-school', this)" class="tab-btn whitespace-nowrap py-3 px-1 border-b-2 font-medium text-base sm:text-lg active">Estou no Ensino M√©dio</button>
                        <button onclick="UI.switchInnerCareersTab('post-high-school', this)" class="tab-btn whitespace-nowrap py-3 px-1 border-b-2 font-medium text-base sm:text-lg">Terminei o Ensino M√©dio</button>
                   </nav>
             </div>
             <div id="careers-high-school-tab-inner" class="tab-content"></div>
             <div id="careers-post-high-school-tab-inner" class="tab-content hidden"></div>
        `;
        this.renderHighSchoolContent();
    },

    switchInnerCareersTab(tabName, clickedButton) {
        const nav = document.getElementById('inner-careers-nav');
        nav.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        clickedButton.classList.add('active');
        
        document.getElementById('careers-high-school-tab-inner').classList.add('hidden');
        document.getElementById('careers-post-high-school-tab-inner').classList.add('hidden');

        document.getElementById(`careers-${tabName}-tab-inner`).classList.remove('hidden');

        if (tabName === 'high-school') {
            this.renderHighSchoolContent();
        } else {
            this.renderPostHighSchoolContent();
        }
    },
    
    renderHighSchoolContent() {
        const data = DB.careerGuide.highSchool;
        const container = document.getElementById('careers-high-school-tab-inner');
        container.innerHTML = `
            <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                <p class="text-center text-gray-600 mb-10">${data.intro}</p>
                
                <h3 class="text-2xl font-bold text-center mb-6 tracking-tight">Descubra Seus Interesses</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                    ${data.interests.map(item => `
                        <div class="career-card bg-teal-50/50 p-6 rounded-xl text-center border border-teal-100">
                            <div class="text-4xl mb-3">${item.icon}</div>
                            <h4 class="font-bold text-lg text-gray-800">${item.title}</h4>
                            <p class="text-sm text-gray-600 mt-2">${item.description}</p>
                        </div>
                    `).join('')}
                </div>

                <h3 class="text-2xl font-bold text-center mb-6 tracking-tight">D√™ os Primeiros Passos</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    ${data.firstSteps.map(item => `
                        <div class="career-card bg-white p-6 rounded-xl shadow-md border">
                            <div class="text-3xl mb-3">${item.icon}</div>
                            <h4 class="font-bold text-lg text-gray-800">${item.title}</h4>
                            <p class="text-sm text-gray-600 mt-2">${item.description}</p>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    },

    renderPostHighSchoolContent() {
        const data = DB.careerGuide.postHighSchool;
        const container = document.getElementById('careers-post-high-school-tab-inner');
        container.innerHTML = `
            <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                <p class="text-center text-gray-600 mb-10">${data.intro}</p>
                
                <h3 class="text-2xl font-bold text-center mb-6 tracking-tight">Caminhos a Seguir</h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-12">
                    ${data.paths.map(item => `
                        <div class="career-card bg-gray-50 p-6 rounded-xl border">
                            <div class="flex items-start">
                                <div class="text-4xl mr-4">${item.icon}</div>
                                <div>
                                    <h4 class="font-bold text-xl text-gray-800">${item.title}</h4>
                                    <p class="text-sm text-gray-600 mt-2">${item.description}</p>
                                    <div class="mt-3 text-xs">
                                        <p><strong class="text-green-600">Pr√≥s:</strong> ${item.pros}</p>
                                        <p><strong class="text-red-600">Contras:</strong> ${item.cons}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <h3 class="text-2xl font-bold text-center mb-6 tracking-tight">Ferramentas para o Sucesso</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    ${data.tools.map(item => `
                        <div class="career-card bg-teal-500 text-white p-6 rounded-xl shadow-lg cursor-pointer" onclick="UI.handleToolClick('${item.id}')">
                            <div class="text-4xl mb-3">${item.icon}</div>
                            <h4 class="font-bold text-lg">${item.title}</h4>
                            <p class="text-sm opacity-90 mt-2">${item.description}</p>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    },

    renderJobsContent() {
        const container = document.getElementById('careers-jobs-tab');
        const jobsInCity = DB.jobs.filter(job => job.cidade === State.currentCity);

        if (jobsInCity.length === 0) {
            container.innerHTML = `<div class="bg-white rounded-2xl shadow-lg p-10 text-center"><p class="text-gray-500">Nenhuma vaga de emprego dispon√≠vel em ${State.currentCity} no momento.</p></div>`;
            return;
        }

        container.innerHTML = `
            <div class="space-y-6">
                ${jobsInCity.map(job => `
                    <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-teal-500">
                        <div class="flex flex-col md:flex-row justify-between items-start">
                            <div>
                                <h4 class="text-xl font-bold text-gray-800">${job.title}</h4>
                                <p class="text-md text-gray-600 font-medium">${job.company}</p>
                            </div>
                            <p class="mt-2 md:mt-0 text-sm text-gray-500">üìç ${job.cidade}</p>
                        </div>
                        <p class="my-4 text-gray-700">${job.description}</p>
                        <div>
                            <h5 class="font-bold text-sm mb-2">Requisitos:</h5>
                            <ul class="list-disc list-inside text-sm text-gray-600">
                                ${job.requirements.map(req => `<li>${req}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100 text-right">
                             <a href="mailto:${job.contact}" class="bg-teal-500 text-white font-bold py-2 px-6 rounded-full hover:bg-teal-600 transition-colors">Entrar em Contato</a>
                        </div>
                    </div>
                `).join('')}
            </div>
        `;
    },

    renderEntrepreneurshipContent() {
        const container = document.getElementById('careers-entrepreneurship-tab');
        const data = DB.careerGuide.entrepreneurship;

        container.innerHTML = `
            <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 space-y-12">
                <section class="text-center">
                    <h3 class="text-2xl md:text-3xl font-bold tracking-tight">O Guia do Jovem Empreendedor</h3>
                    <p class="mt-3 text-gray-600 max-w-3xl mx-auto">${data.intro}</p>
                </section>

                <section>
                    <h4 class="text-xl md:text-2xl font-bold text-center mb-8 tracking-tight">Os Primeiros Passos Para Tirar Sua Ideia do Papel</h4>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        ${data.firstSteps.map(item => `
                            <div class="career-card bg-teal-50/50 p-6 rounded-xl text-center border border-teal-100 flex flex-col">
                                <div class="text-4xl mb-3">${item.icon}</div>
                                <h5 class="font-bold text-lg text-gray-800">${item.title}</h5>
                                <p class="text-sm text-gray-600 mt-2 flex-grow">${item.description}</p>
                            </div>
                        `).join('')}
                    </div>
                </section>

                <section>
                    <h4 class="text-xl md:text-2xl font-bold text-center mb-8 tracking-tight">üí° Ideias de Neg√≥cios Para a Regi√£o</h4>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        ${data.businessIdeas.map(item => `
                             <div class="career-card bg-white p-6 rounded-xl shadow-md border flex items-start gap-4">
                                <div class="text-3xl">${item.icon}</div>
                                <div>
                                    <h5 class="font-bold text-lg text-gray-800">${item.title}</h5>
                                    <p class="text-sm text-gray-600 mt-1">${item.description}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </section>

                 <section>
                    <h4 class="text-xl md:text-2xl font-bold text-center mb-8 tracking-tight">Desafios Comuns (e Como Super√°-los)</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                         ${data.commonChallenges.map(item => `
                            <div class="career-card bg-amber-50 p-6 rounded-xl border border-amber-200">
                                <h5 class="font-bold text-lg text-amber-800">${item.title}</h5>
                                <p class="text-sm text-gray-700 mt-2"><strong class="text-amber-900">Dica:</strong> ${item.tip}</p>
                            </div>
                        `).join('')}
                    </div>
                </section>

                <section>
                    <h4 class="text-xl md:text-2xl font-bold text-center mb-8 tracking-tight">Inspira√ß√£o Local: Hist√≥rias de Sucesso</h4>
                     <div class="space-y-10">
                        ${data.localStories.map(person => `
                            <div class="flex flex-col md:flex-row gap-8 bg-white p-4 sm:p-6 rounded-2xl shadow-lg items-center odd:md:flex-row-reverse">
                                <div class="w-full md:w-1/3 mb-4 md:mb-0">
                                    <img src="${person.photo}" alt="Foto de ${person.name}" class="w-full h-80 object-cover rounded-xl shadow-md">
                                </div>
                                <div class="w-full md:w-2/3">
                                    <h5 class="text-2xl font-bold text-gray-800">${person.name}</h5>
                                    <p class="text-md text-teal-600 font-semibold mb-3">${person.business}</p>
                                    <p class="text-gray-600 leading-relaxed">${person.story}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </section>

                <section>
                    <h4 class="text-xl md:text-2xl font-bold text-center mb-8 tracking-tight">Recursos e Ferramentas</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        ${data.resources.map(item => `
                            <a href="${item.link}" target="_blank" class="career-card block bg-white p-6 rounded-xl shadow-md border hover:bg-teal-50">
                                <h5 class="font-bold text-lg text-teal-700">${item.name} ‚Üí</h5>
                                <p class="text-sm text-gray-600 mt-2">${item.description}</p>
                            </a>
                        `).join('')}
                    </div>
                </section>
            </div>
        `;
    },
    
    renderReviewsChart(reviews) {
        const ctx = document.getElementById('reviewsChart')?.getContext('2d');
        if (!ctx) return;
        
        const ratingCounts = [0, 0, 0, 0, 0]; 
        reviews.forEach(r => {
            if (r.nota >= 1 && r.nota <= 5) {
                ratingCounts[r.nota - 1]++;
            }
        });

        if (State.chartInstance) {
            State.chartInstance.destroy();
        }

        const labels = ['1 ‚òÖ', '2 ‚òÖ', '3 ‚òÖ', '4 ‚òÖ', '5 ‚òÖ'];
        const colors = ['#ef5350', '#ffa726', '#ffd54f', '#66bb6a', '#26a69a'];

        State.chartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'N¬∫ de Avalia√ß√µes',
                    data: ratingCounts,
                    backgroundColor: colors,
                    borderColor: 'rgba(255, 255, 255, 0.5)',
                    borderWidth: 1,
                    borderRadius: 8,
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true, maintainAspectRatio: false,
                scales: { 
                    y: { 
                        grid: { display: false },
                        ticks: { font: { size: 14, family: 'Nunito' } }
                    },
                    x: { 
                        beginAtZero: true, 
                        ticks: { precision: 0, font: { family: 'Nunito' } }
                    } 
                },
                plugins: { 
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: '#546E7A',
                        titleFont: { size: 16, weight: 'bold', family: 'Nunito' },
                        bodyFont: { size: 14, family: 'Nunito' },
                        padding: 12,
                        cornerRadius: 12,
                    }
                }
            }
        });
    },
    
    openModal(modalId) {
        const modal = document.getElementById(modalId);
        const modalContent = document.getElementById(`${modalId}-content`);
        if(modalId === 'quote-modal'){
            document.getElementById('quote-form-container').classList.remove('hidden');
            document.getElementById('quote-success-message').classList.add('hidden');
        }
        modal.classList.remove('hidden');
        setTimeout(() => {
            modal.classList.remove('opacity-0');
            modalContent.classList.remove('scale-95');
        }, 10);
    },

    closeModal(modalId) {
        const modal = document.getElementById(modalId);
        const modalContent = document.getElementById(`${modalId}-content`);
        modal.classList.add('opacity-0');
        modalContent.classList.add('scale-95');
        setTimeout(() => modal.classList.add('hidden'), 300);
    },

    openCvModal() {
        document.getElementById('cv-content').innerHTML = DB.careerGuide.cvModel;
        this.openModal('cv-modal');
    },

    handleToolClick(toolId) {
        if (toolId === 'cv') {
            this.openCvModal();
        }
        if (toolId === 'interview' || toolId === 'courses') {
            alert('Esta funcionalidade ser√° implementada em breve!');
        }
    },
    
    showQuoteSuccess() {
        document.getElementById('quote-form-container').classList.add('hidden');
        document.getElementById('quote-success-message').classList.remove('hidden');
    },

    handleScroll() {
        const btn = document.getElementById('scrollToTopBtn');
        if (window.scrollY > 300) {
            btn.classList.remove('opacity-0', 'translate-y-4');
        } else {
            btn.classList.add('opacity-0', 'translate-y-4');
        }
    }
};

const Utils = {
    renderStars(rating) {
        let stars = '';
        const fullStars = Math.floor(rating);
        const halfStar = rating % 1 >= 0.5;
        const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
        
        for (let i = 0; i < fullStars; i++) stars += `<span class="text-amber-400">‚òÖ</span>`;
        if (halfStar) stars += `<span class="text-amber-400">‚òÖ</span>`;
        for (let i = 0; i < emptyStars; i++) stars += `<span class="text-gray-300">‚òÖ</span>`;
        
        return `<div class="flex items-center text-xl">${stars}</div>`;
    },

    calculateAverageRating(reviews) {
        if (!reviews || reviews.length === 0) return 0;
        return reviews.reduce((sum, review) => sum + review.nota, 0) / reviews.length;
    },
    
    getTodaysHours(company) {
        const weekdays = ["domingo", "segunda", "terca", "quarta", "quinta", "sexta", "sabado"];
        const todayIndex = new Date().getDay();
        const todayKey = weekdays[todayIndex];
        return company.horario_funcionamento[todayKey] || "Fechado";
    },

    isCompanyOpen(company) {
        const now = new Date();
        const weekdays = ["domingo", "segunda", "terca", "quarta", "quinta", "sexta", "sabado"];
        
        // Function to check a specific day's schedule
        const checkSchedule = (dayIndex, referenceDate) => {
            const dayKey = weekdays[dayIndex];
            const hours = company.horario_funcionamento[dayKey];

            if (!hours || hours === 'Fechado') return false;

            const [openTime, closeTime] = hours.split('-');
            const [openHour, openMin] = openTime.split(':').map(Number);
            const [closeHour, closeMin] = closeTime.split(':').map(Number);
            
            const openDate = new Date(referenceDate);
            openDate.setHours(openHour, openMin, 0, 0);

            const closeDate = new Date(referenceDate);
            closeDate.setHours(closeHour, closeMin, 0, 0);

            // Handle overnight schedules (e.g., 18:00 - 02:00)
            if (closeDate <= openDate) {
                closeDate.setDate(closeDate.getDate() + 1);
            }
            
            return now >= openDate && now < closeDate;
        };
        
        // Check today's schedule
        if (checkSchedule(now.getDay(), now)) {
            return true;
        }

        // Check yesterday's schedule (for shifts that cross midnight)
        const yesterday = new Date(now);
        yesterday.setDate(now.getDate() - 1);
        if (checkSchedule(yesterday.getDay(), yesterday)) {
            return true;
        }

        return false;
    },
    
    formatCountdown(targetDate) {
        const now = new Date().getTime();
        const target = new Date(targetDate).getTime();
        const distance = target - now;

        if (distance < 0) return null;

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        let result = '';
        if (days > 0) result += `${days}d `;
        if (hours > 0 || days > 0) result += `${String(hours).padStart(2, '0')}h `;
        if (minutes > 0 || hours > 0 || days > 0) result += `${String(minutes).padStart(2, '0')}m `;
        result += `${String(seconds).padStart(2, '0')}s`;

        return result.trim();
    }
};

App.init();

</script>

</body>
</html>